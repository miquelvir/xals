{"version":3,"sources":["i18n.js","translations/en.js","translations/es.js","pages/notFoundPage/notFoundPage.js","contexts/userContext.js","helpers/privateRoute.js","components/card/card.js","pages/restaurantDashboardPage/components/tableCard/baseCard.js","helpers/numberPadding.js","pages/restaurantDashboardPage/components/stopWatch/_timeToString.js","pages/restaurantDashboardPage/components/stopWatch/stopWatch.js","hooks/useElapsedTime/useElapsedTime.js","palette.js","components/modal/modal.js","components/buttons/button/button.js","components/buttons/noButton/noButton.js","components/textActionsModal/textActionsModal.js","components/confirmModal/confirmModal.js","contexts/confirmContext.js","components/buttons/yesButton/yesButton.js","pages/restaurantDashboardPage/hooks/useAccessToken/useAccessToken.js","helpers/csrfCookieHeader.js","pages/restaurantDashboardPage/hooks/useLoginWithAccessToken/useLoginWithAccessToken.js","pages/restaurantDashboardPage/services/loginWithAccessToken.js","pages/restaurantDashboardPage/contexts/realtimeService/_tableUtils.js","hooks/useQueueState/useQueueState.js","pages/restaurantDashboardPage/contexts/realtimeService/realtimeServiceContext.js","pages/restaurantDashboardPage/components/actionMenu/actionMenu.js","pages/restaurantDashboardPage/components/tableCard/tableCard.js","components/inputs/input/input.js","components/questionModal/questionModal.js","contexts/questionContext.js","pages/restaurantDashboardPage/components/newTableMenu/newTableMenu.js","pages/restaurantDashboardPage/components/tableCard/newTableCard.js","pages/restaurantDashboardPage/components/sortButton/sortButton.js","contexts/themeContext.js","components/themeButton/themeButton.js","contexts/languageContext.js","components/languageButton/languageButton.js","pages/restaurantDashboardPage/restaurantDashboardPage.js","pages/adminDashboardPage/components/privacyButton/privacyButton.js","pages/adminDashboardPage/components/signOutButton/signOutButton.js","pages/adminDashboardPage/services/logout.js","pages/adminDashboardPage/components/zone/zone.js","services/crudApi.js","pages/adminDashboardPage/services/restaurantAccessTokens.js","pages/adminDashboardPage/components/accessUrl/accessUrl.js","hooks/useCollectionState/useCollectionState.js","pages/adminDashboardPage/components/zoneAccessTokens/zoneAccessTokens.js","pages/adminDashboardPage/services/defaultTables.js","pages/adminDashboardPage/components/zoneDefaultTables/zoneDefaultTables.js","pages/adminDashboardPage/components/admin/admin.js","pages/adminDashboardPage/services/restaurantAdministrators.js","pages/adminDashboardPage/components/zoneRestaurantAdministrators/zoneRestaurantAdministrators.js","pages/adminDashboardPage/services/restaurants.js","pages/adminDashboardPage/components/timeProfile/timeProfile.js","pages/adminDashboardPage/components/zoneTimeProfile/zoneTimeProfile.js","pages/adminDashboardPage/adminDashboardPageRestaurant.js","pages/adminDashboardPage/services/superAdministrators.js","pages/adminDashboardPage/components/zoneRootAdministrators/zoneRootAdministrators.js","pages/adminDashboardPage/components/restaurant/restaurant.js","pages/adminDashboardPage/components/zoneRestaurants/zoneRestaurants.js","pages/adminDashboardPage/adminDashboardPageSuper.js","pages/adminDashboardPage/components/backToRootButton/backToRootButton.js","pages/adminDashboardPage/adminDashboardPage.js","pages/loginPage/loginPage.js","pages/loginPage/services/loginWithGoogle.js","App.js","reportWebVitals.js","index.js"],"names":["resources","en","translation","es","i18n","use","initReactI18next","init","lng","interpolation","escapeValue","NotFoundPage","class","src","width","height","TYPE_ACCESS_TOKEN","TYPE_RESTAURANT_ADMIN","TYPE_SUPER_ADMIN","userContext","React","createContext","type","setType","params","setParams","loggedIn","isRestaurantAdminLoggedIn","isSuperAdminLoggedIn","UserContextProvider","children","useState","contextProvider","Provider","value","PrivateRoute","Component","component","rest","userCtx","useContext","render","props","includes","to","pathname","state","from","location","defaultAttributes","Card","attributes","className","clsx","BaseCard","twoPadding","number","n","String","padStart","nPadding","ALLOWED_PRECISIONS","timeToString","elapsedTime","precision","map","hh","mm","ss","ms","StopWatch","delta","startTime","notifyDelta","_","refreshIntervalMs","_startDate","toUTC","startDate","setStartDate","now","setNow","useEffect","ticker","setInterval","DateTime","clearInterval","useElapsedMs","elapsedMs","Math","floor","palette","Modal","handleHide","bgOverlay","bgOpacity","bg","z","disabled","role","onClick","Button","text","bgColor","textColor","ring","border","w","loading","NoButton","useTranslation","t","TextActionsModal","title","description","actions","icon","id","ConfirmModal","cancel","confirm","handleSuccess","handleCancel","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Fragment","confirmContext","BaseConfirmContextProvider","showConfirmDialog","setShowConfirmDialog","handleHideConfirmDialog","undefined","confirmHandler","setConfirmHandler","YesButton","authHeader","Cookies","get","useLoginWithAccessToken","restaurantId","accessToken","useSnackbar","enqueueSnackbar","closeSnackbar","Promise","resolve","reject","axios","url","process","REACT_APP_BACKEND_URL","method","auth","username","password","headers","then","res","data","catch","err","attemptLogin","isValid","variant","parseTable","table","fromISO","zone","useQueueState","default_","queue","setQueue","push","item","serve","idx","splice","serveFirst","serveAll","isEmpty","length","ENDPOINT","realtimeServiceContext","tables","setTables","addTable","finishTable","nextCourse","deleteTable","RealtimeServiceContextProvider","search","useLocation","URLSearchParams","useAccessToken","socket","setSocket","newSocket","io","close","on","_tables","forEach","parseTables","next_course","newItems","emit","finishedTables","nextTables","deleteTables","Object","values","ActionMenu","handleShow","realtimeCtx","isLastCourse","lastCourse","last_course_datetime","toLocal","hour","minute","STATUS_ALARM","STATUS_WARNING","TableCard","showActionMenu","setShowActionMenu","handleShowActionMenu","status","setStatus","theme","fg","useTheme","minutes","alarmMinutes","warningMinutes","Input","name","label","lead","trail","placeholder","field","form","meta","touched","errors","for","error","QuestionModal","handleSubmit","initialValues","question","onSubmit","setSubmitting","setErrors","isSubmitting","questionContext","prompt","QuestionContextProvider","showDialog","setShowDialog","handleHideDialog","handleShowDialog","handlers","setHandlers","tryParseInt","x","parseInt","NewTableMenu","addNewTable","existingTableNumbers","defaultTables","setDefaultTables","sort","a","b","handleNewTable","tableNumber","setLoading","result","filter","tableName","NewTableCard","showNewTableMenu","setShowNewTableMenu","handleShowNewTableMenu","SORT_PRIORITY","SORT_NUMBER_ASCENDING","SORT_NUMBER_DESCENDING","SORTS","SortButton","setSort","indexOf","THEME_LIGHT","THEME_DARK","THEMES","LOCALSTORAGE_THEME","themeContext","setTheme","setLight","setDark","toggle","isLight","isDark","ThemeContextProvider","localStorage","getItem","_setTheme","newTheme","Error","setItem","ThemeButton","themeCtx","LANGUAGE_EN","LANGUAGES","LOCALSTORAGE_LANGUAGE","languageContext","language","setLanguage","LanguageContextProvider","localStorageLanguage","_setLanguage","newLanguage","changeLanguage","LanguageButton","languageCtx","sortProviders","table1","table2","toMillis","_RestaurantDashboardPage","sortedTables","_setSortedTables","newTables","restaurantName","RestaurantDashboardPage","PrivacyButton","privacyFilter","setPrivacyFilter","clientId","REACT_APP_GOOGLE_CLIENT_ID","SignOutButton","history","useHistory","signOut","useGoogleLogout","onLogoutSuccess","onLogoutFailure","Zone","endpoint","onThen","onCatch","post","patch","remove","getEndpoint","AccessUrl","token","onDelete","onPatch","handleCopyUrlToClipboard","navigator","clipboard","writeText","comment","patchRestaurantAccessTokenService","newToken","useCollectionState","key","items","setItems","addItem","removeItem","patchItem","newItem","add","ZoneAccessTokens","tokens","setTokens","tokenUtils","getRestaurantAccessTokens","handleDeleteAccessToken","deleteRestaurantAccessToken","handleOnAccessTokenPatch","postRestaurantAccessToken","ZoneDefaultTables","tableUtils","getRestaurantDefaultTables","handleDeleteDefaultTable","deleteRestaurantDefaultTables","finally","postRestaurantDefaultTables","Admin","admin","deleteAdministrator","deleteAdministratorService","handleDelete","ZoneRestaurantAdministrators","administrators","setAdministrators","administratorUtils","getRestaurantAdministrators","administators","administrator","deleteRestaurantAdministrator","email","postRestaurantAdministrator","patchRestaurant","TimeProfile","prefix","profileName","profileValue","enableReinitialize","newValue","profile","ZoneTimeProfile","profiles","setProfiles","restaurant","alarm_minutes","warning_minutes","AdminDashboardPageRestaurant","deleteSuperAdministrator","ZoneRootAdministrators","postSuperAdministrator","Restaurant","setRestaurant","deleteRestaurant","handleGoToAdmin","patchRestaurantService","newRestaurant","ZoneRestaurants","restaurants","setRestaurants","restaurantsUtils","postRestaurant","AdminDashboardPageSuper","BackToRootButton","AdminDashboardPage","LoginPage","buttonText","onSuccess","tokenObj","id_token","onFailure","cookiePolicy","App","routerRef","createRef","ref","basename","path","baseRouter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8b497857.chunk.js","sourcesContent":["import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\nimport { en } from \"./translations/en\";\r\nimport { es } from \"./translations/es\";\r\n\r\nconst resources = {\r\n  en: {\r\n    translation: en\r\n  },\r\n  es: {\r\n    translation: es\r\n  }\r\n};\r\n\r\ni18n\r\n  .use(initReactI18next) // passes i18n down to react-i18next\r\n  .init({\r\n    resources,\r\n    lng: 'en',  // use i18n.changeLanguage to change it dynamically\r\n    interpolation: {\r\n      escapeValue: false // react already safes from xss\r\n    }\r\n  });\r\n\r\n  export default i18n;","export const en = {\r\n    \"new\": \"new\",\r\n    \"administratorEmail\": \"administrator email\",\r\n    \"descriptionAddAdmin\": \"this will add a new root administrator to the system; root administrators have complete access to all restaurants and users (including other administrators)\",\r\n    \"errorAdminRetrieval\": \"unable to retrieve root administrators\",\r\n    \"addAdmin\": \"added new root administrator\",\r\n    \"errorAddAdmin\": \"unable to add new root administrator\",\r\n    \"cancelled\": \"cancelled\",\r\n    \"root administrators\": \"root administrators\",\r\n    \"table\": \"table\",\r\n    \"timeLastCourse\":\"last course was served at\",\r\n    \"cancel\": \"cancel\",\r\n    \"dessertsAndEnd\": \"desserts & finalize\",\r\n    \"next course\": \"next course\",\r\n    \"finish\": \"finish\",\r\n    \"delete\": \"delete\",\r\n    \"new table2\": \"new table2\",\r\n    \"startTimerTable\": \"start timer for a new table\",\r\n    \"custom\": \"custom\",\r\n    \"markedFinish\": \"has been marked as finished\",\r\n    \"servedWaiting\": \"has been served... now waiting for\",\r\n    \"has been deleted\":\"has been deleted\",\r\n    \"errorPageAccess\": \"you can't access this page\",\r\n    \"something went wrong\": \"something went wrong\",\r\n    \"no\": \"no\",\r\n    \"yes\": \"yes\",\r\n    \"askContinue\": \"Do you wish to continue?\",\r\n    \"difficultUndone\": \"this action might not be easily undone\",\r\n    \"confirm\": \"confirm\",\r\n    \"submit\": \"submit\",\r\n    \"unable to finalize request\": \"unable to finalize request\",\r\n    \"deleteTableQuestion\": \"Do you want to delete Table\",\r\n    \"Deleting Table\": \"Deleting Table\",\r\n    \"onlyDeleteFromList\":\"will only remove it from the default tables list.\",\r\n    \"deleted default table\": \"deleted default table\",\r\n    \"unable to delete default table\": \"unable to delete default table\",\r\n    \"table #\": \"table #\",\r\n    \"nameTableQuestion\": \"what is the name of the new table you want to add?\",\r\n    \"added new default table\":\"added new default table\",\r\n    \"unable to add new default table\": \"unable to add new default table\",\r\n    \"ADD NEW\": \"ADD NEW\"\r\n};","export const es = {\r\n    \"new\": \"nuevo\",\r\n    \"administratorEmail\": \"correo de administrador\",\r\n    \"descriptionAddAdmin\": \"esto aadir un nuevo administrador root en el sistema; los administradores tienen acceso completo a todos los restaurantes y usuarios (incluyendo a otros administradores)\",\r\n    \"errorAdminRetrieval\": \"no se han podido obtener los administradores root\",\r\n    \"addAdmin\": \"nuevo administrador root aadido\",\r\n    \"errorAddAdmin\": \"no se ha podido aadir un nuevo administrador root\",\r\n    \"cancelled\": \"cancelado\",\r\n    \"root administrators\": \"administradores root\",\r\n    \"table\": \"mesa\",\r\n    \"timeLastCourse\": \"el anterior plato se sirvi a la(s)\",\r\n    \"cancel\": \"cancelar\",\r\n    \"dessertsAndEnd\": \"postres y finalizar mesa\",\r\n    \"next course\": \"siguiente plato\",\r\n    \"finish\": \"finalizar\",\r\n    \"delete\": \"eliminar\",\r\n    \"new table2\": \"nueva mesa2\",\r\n    \"startTimerTable\": \"iniciar temporizador para una nueva mesa\",\r\n    \"custom\": \"customizado\",\r\n    \"markedFinish\": \"se ha marcado como finalizada\",\r\n    \"servedWaiting\": \"ha sido servida... ahora esperando a\",\r\n    \"has been deleted\": \"ha sido eliminada\",\r\n    \"errorPageAccess\": \"no puedes acceder a esta pgina\",\r\n    \"something went wrong\": \"algo ha ido mal\",\r\n    \"no\": \"no\",\r\n    \"yes\": \"si\",\r\n    \"askContinue\": \"Desea continuar?\",\r\n    \"difficultUndone\": \"esta accin podria no deshacerse fcilmente\",\r\n    \"confirm\": \"confirmar\",\r\n    \"submit\": \"enviar\",\r\n    \"unable to finalize request\": \"no se ha podido continuar con la solicitud\",\r\n    \"deleteTableQuestion\": \"Quieres borrar la Mesa\",\r\n    \"Deleting Table\": \"Borrar la Mesa\",\r\n    \"onlyDeleteFromList\": \"solo la sacar de la lista de mesas predeterminadas.\",\r\n    \"deleted default table\": \"mesa por defecto eliminada\",\r\n    \"unable to delete default table\": \"no se ha podido eliminar la mesa predeterminada.\",\r\n    \"table #\": \"mesa #\",\r\n    \"nameTableQuestion\": \"cul es el nombre de la mesa que quieres aadir?\",\r\n    \"added new default table\": \"nueva mesa predeterminada aadida\",\r\n    \"unable to add new default table\": \"no se ha podido aadir la nueva mesa predeterminada.\",\r\n    \"ADD NEW\": \"AADIR NUEVA\"\r\n\r\n};","import React, {useState} from 'react';\r\nimport './notFoundPage.css'\r\n\r\n\r\n\r\nfunction NotFoundPage() {\r\n\r\n  return(\r\n    <>\r\n      <div class=\"headerName\">Error 404: Not found page</div>\r\n      <div class= \"center\">\r\n          <img src= \"not_found_trees.svg\" width=\"400\" height=\"280\"/>\r\n          <span class = \"descriptionName\">The page you are trying to access doesn't exist</span>\r\n      </div>\r\n    </>\r\n    )\r\n}\r\n\r\nexport default NotFoundPage","import React, { useState } from \"react\";\r\n\r\n\r\nexport const TYPE_ACCESS_TOKEN = 'accessToken';\r\nexport const TYPE_RESTAURANT_ADMIN = 'restaurantAdmin';\r\nexport const TYPE_SUPER_ADMIN = 'superAdmin';\r\n\r\nexport const userContext = React.createContext(\r\n    {\r\n        type: null,\r\n        setType: (type) => {},\r\n        params: {},\r\n        setParams: (params) => {},\r\n        loggedIn: false,\r\n        isRestaurantAdminLoggedIn: false,\r\n        isSuperAdminLoggedIn: false,\r\n    }\r\n);\r\n\r\nexport const UserContextProvider = ({ children }) => {\r\n    const [type, setType] = useState(null);\r\n    const [params, setParams] = useState({});\r\n\r\n    const loggedIn = type !== null;\r\n    const isRestaurantAdminLoggedIn = type === TYPE_RESTAURANT_ADMIN;\r\n    const isSuperAdminLoggedIn = type === TYPE_SUPER_ADMIN;\r\n\r\n    const contextProvider = {\r\n      type: type,\r\n      setType: setType,\r\n      params: params,\r\n      setParams: setParams,\r\n      loggedIn: loggedIn,\r\n      isRestaurantAdminLoggedIn: isRestaurantAdminLoggedIn,\r\n      isSuperAdminLoggedIn: isSuperAdminLoggedIn\r\n    };\r\n\r\n    return <userContext.Provider value={contextProvider}>\r\n        {children}\r\n    </userContext.Provider>;\r\n}\r\n","import {Redirect, Route} from 'react-router-dom';\r\nimport React from \"react\";\r\nimport {userContext} from '../contexts/userContext';\r\n\r\nfunction PrivateRoute({ component: Component, type = null, ...rest }) {\r\n    const userCtx = React.useContext(userContext);\r\n    return (\r\n        <Route {...rest} render={props =>\r\n        {\r\n          if (!userCtx.loggedIn || (type !== null && !type.includes(userCtx.type))) {\r\n            // not logged in so redirect to login page with the return url\r\n            return <Redirect to={{ pathname: `/login`, state: { from: props.location } }} />\r\n            }\r\n\r\n            // authorised so return component\r\n            return <Component {...props} {...rest}/>\r\n      }}/>\r\n    );\r\n}\r\n\r\n\r\nexport default PrivateRoute;","import clsx from 'clsx';\r\n\r\n/**\r\n * Card component\r\n *\r\n * a surface with shadow, padding and margin\r\n */\r\n\r\nconst defaultAttributes = {\r\n      'p-6': true,\r\n      'max-w-sm': false,\r\n      'bg-white': true,\r\n      'inline-block': false,\r\n      'rounded-md': true,\r\n      'shadow-lg': true,\r\n      'overflow-auto': true,\r\n    };\r\nfunction Card({\r\n    attributes=defaultAttributes,\r\n    children=null,\r\n    ...props\r\n    }) {\r\n  return <div className={clsx({...defaultAttributes, ...attributes})} {...props}>\r\n          {children}\r\n   </div>;\r\n}\r\n\r\nexport default Card;","import Card from '../../../../components/card/card';\r\n\r\nconst defaultAttributes = {\r\n   'w-full': true,\r\n   'h-36': true,\r\n   'cursor-pointer': true,\r\n   'transform transition': true,\r\n   'select-none': true\r\n};\r\n\r\nfunction BaseCard({\r\n   attributes=defaultAttributes,\r\n   ...props\r\n}) {\r\n   return <Card attributes={{...defaultAttributes, ...attributes}} {...props}/>;\r\n}\r\n\r\nexport default BaseCard;","/**\r\n * nPaddinng pads a number to n digits (e.g. 1 -> 001 for n=3)\r\n * \r\n * @param number, a number \r\n * @param n, the padding required \r\n * @returns the number with as many leading zeros as needed for it to be of the minimum length >= n\r\n */\r\nexport const nPadding = (number, n) => {\r\n    if (n <= 0) throw `n must be > 0, '${n}' is an invalid padding`;\r\n\r\n    return String(number).padStart(n, '0');\r\n}\r\n\r\n/**\r\n * twoPadding pads a number to two digits (e.g. 1 -> 01)\r\n * \r\n * @param number, a number \r\n * @returns the number with as many leading zeros as needed for it to be of the minimum length >= 2\r\n */\r\nexport const twoPadding = (number) => nPadding(number, 2);","import {twoPadding} from '../../../../helpers/numberPadding';\r\n\r\nconst ALLOWED_PRECISIONS = ['hours', 'minutes', 'seconds', 'milliseconds'];\r\nexport const timeToString = (elapsedTime, precision) => {\r\n    if (!ALLOWED_PRECISIONS.includes(precision)) throw `precision '${precision}' is not a valid precision; must be one of ${ALLOWED_PRECISIONS}`;\r\n\r\n    const [hh, mm, ss, ms] = elapsedTime.map(twoPadding);\r\n\r\n    switch (precision) {\r\n        case ALLOWED_PRECISIONS[0]:\r\n            return hh;\r\n        case ALLOWED_PRECISIONS[1]:\r\n            return `${hh}:${mm}`;\r\n        case ALLOWED_PRECISIONS[2]:\r\n            return `${hh}:${mm}:${ss}`;\r\n        case ALLOWED_PRECISIONS[3]:\r\n            return `${hh}:${mm}:${ss}:${ms}`;\r\n    }\r\n}","import { useElapsedMs, msToTime } from '../../../../hooks/useElapsedTime/useElapsedTime';\r\nimport { timeToString } from './_timeToString';\r\nimport { useEffect } from 'react';\r\n/**\r\n * \r\n * @param startTime, required, the Date to count from \r\n * @param refreshIntervalMs, optional, the refresh frequency of the clock\r\n * @param precision, optional, the precision of the clock ('hours', 'minutes', 'seconds' or 'miliseconds')\r\n * @returns a string up to the required precision\r\n */\r\nexport function StopWatch({\r\n    startTime,\r\n    notifyDelta = (_) => {},\r\n    refreshIntervalMs = 1000,\r\n    precision = 'seconds'\r\n}) {\r\n    const [elapsedMs] = useElapsedMs(startTime, refreshIntervalMs);\r\n    const elapsedTime = msToTime(elapsedMs);\r\n\r\n    useEffect(() => {\r\n        notifyDelta(elapsedMs);\r\n    }, [elapsedMs])\r\n    return <span>\r\n        {timeToString(elapsedTime, precision)}\r\n    </span>;\r\n}\r\n","import { useState, useEffect } from 'react';\r\n\r\nimport { DateTime, Interval } from 'luxon';\r\n\r\n/**\r\n * msToTime returns the proper time in hours, minutes, seconds and milliseconds from a given ms delta\r\n * \r\n * @param delta, int, an amount of milliseconds\r\n * @returns hours, minutes, seconds and milliseconds which fit in delta\r\n */\r\nexport const msToTime = (delta) => [\r\n    Math.floor((delta / (1000 * 60 * 60)) % 24),\r\n    Math.floor((delta / (1000 * 60)) % 60),\r\n    Math.floor((delta / 1000) % 60),\r\n    Math.floor((delta % 1000))\r\n];\r\n\r\n/**\r\n * useElapsedTime returns the elapsed time in ms \r\n * \r\n * uses UTC\r\n * \r\n * @param startDate, Date object, datetime to count the elapsed time from\r\n * @param refreshIntervalMs, int, update period in ms\r\n * @returns difference in ms since startDate to now\r\n */\r\nexport const useElapsedMs = (_startDate, refreshIntervalMs = 1000) => {\r\n    \r\n    const [startDate, setStartDate] = useState(_startDate.toUTC());\r\n    const [now, setNow] = useState(_startDate.toUTC()); // Save the current date to be able to trigger an update\r\n\r\n    useEffect(() => {\r\n        setStartDate(_startDate);\r\n    }, [_startDate]);\r\n\r\n    // use an interval to update the 'now' date every refreshIntervalMs ms\r\n    useEffect(() => {\r\n        const ticker = setInterval(() => setNow(DateTime.now().toUTC()), refreshIntervalMs);\r\n        return () => clearInterval(ticker);  // clean timer on unmount\r\n    }, [refreshIntervalMs]);\r\n\r\n    return [now-startDate];\r\n};","export const palette = {\r\n    bg: 'bg-gray-50 dark:bg-gray-800',\r\n    bg_responsive: 'bg-gray-50 active:hover:bg-gray-100 dark:bg-gray-800 active:hover:dark:bg-gray-600',\r\n    bg_force_responsive: 'bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-600',\r\n    surface1: 'bg-gray-100 dark:bg-gray-700',\r\n    surface1_responsive: 'bg-gray-100 active:hover:bg-gray-200 dark:bg-gray-700 active:hover:dark:bg-gray-600',\r\n    surface2: 'bg-gray-200 dark:bg-gray-600',\r\n    surface2_responsive: 'bg-gray-200 active:hover:bg-gray-300 dark:bg-gray-600 active:dark:hover:bg-gray-500',\r\n    text: 'text-gray-800 dark:text-gray-50',\r\n    textLight: 'text-gray-700 dark:text-gray-100',\r\n    textBold: 'text-gray-900 dark:text-white'\r\n};\r\n","import { palette } from \"../../palette\";\r\n\r\n/**\r\n * Modal component\r\n *\r\n * a floating modal with a background overlay\r\n */\r\nfunction Modal({\r\n  handleHide = () => { },\r\n  children = null,\r\n  bgOverlay = 'bg-gray-500',\r\n  bgOpacity = 'bg-opacity-75',\r\n  bg = palette.bg,\r\n  z = 'z-10',\r\n  disabled = false,\r\n  ...props\r\n}) {\r\n\r\n  const _handleHide = () => {\r\n    if (disabled) return;\r\n    handleHide();\r\n  }\r\n\r\n  return <div {...props} className={`fixed ${z} inset-0 overflow-y-auto`} aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\r\n    <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n      <div className={`fixed inset-0 ${bgOverlay} ${bgOpacity} transition-opacity`} aria-hidden=\"true\" onClick={_handleHide} />\r\n      <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\r\n      <div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\r\n        <div className={`${bg} px-4 pt-5 pb-4 sm:p-6 sm:pb-4`}>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nexport default Modal;","import clsx from 'clsx';\r\nimport { palette } from '../../../palette';\r\n\r\n/**\r\n * Base button component\r\n */\r\nconst defaultAttributes = {\r\n      'm-1': true,\r\n      'inline-flex': true,\r\n      'justify-center': true,\r\n      'rounded-md': true,\r\n      'border': false,\r\n      'shadow-sm': true,\r\n      'px-4': true,\r\n      'py-2': true,\r\n      'text-base': true,\r\n      'font-medium': true,\r\n      'text-white': true,\r\n      'focus:outline-none': true,\r\n      'focus:ring-2': true,\r\n      'focus:ring-offset-2': true,\r\n      'sm:ml-3': true,\r\n      'sm:text-sm': true,\r\n      'disabled:opacity-50': true,\r\n      'select-none': true\r\n    };\r\n\r\nexport default function Button({\r\n    text,\r\n    bgColor=palette.bg_responsive,\r\n    textColor=palette.text,\r\n    ring='focus:ring-gray-500',\r\n    border=palette.bg,\r\n    attributes=defaultAttributes,\r\n    onClick= () => {},\r\n    w = 'w-full sm:w-auto',\r\n    loading=false,\r\n    ...props\r\n    }) {\r\n  return <button  onClick={onClick} type=\"button\" className={clsx(\r\n    {...defaultAttributes, \r\n    [bgColor]: true, \r\n    [textColor]: true,\r\n    [ring]: true, \r\n    [w]: true,\r\n    [border]: true, \r\n    ...attributes})} {...props}>\r\n      {loading && <span className={`animate-ping absolute inline-flex h-5 w-5 rounded-full opacity-75 ${palette.surface1}`}></span>}\r\n  {text}\r\n</button>;\r\n}\r\n","import Button from \"../button/button\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n/**\r\n * No (red) button component\r\n */\r\nexport default function NoButton({\r\n    attributes={},\r\n    text=\"no\",\r\n    onClick= () => {},\r\n    ...props\r\n    }) {\r\n\r\n    const { t, i18n } = useTranslation();\r\n\r\n  return <Button \r\n            onClick={onClick}\r\n            text={t(text)} //\r\n            bgColor='bg-red-600 hover:active:bg-red-700'\r\n            textColor='text-white'\r\n            ring='focus:ring-red-500'\r\n            border='border-transparent'\r\n            attributes={attributes}\r\n            {...props}\r\n          />;\r\n}\r\n","import { palette } from \"../../palette\";\r\nimport Modal from \"../modal/modal\";\r\n\r\n/**\r\n * Modal component with a space for title, description and buttons\r\n */\r\nfunction TextActionsModal({\r\n    handleHide= () => {},\r\n    title=null,\r\n    description=null,\r\n    actions=null,\r\n    children=null,\r\n    icon=null,\r\n    disabled=false,\r\n    ...props\r\n    }) {\r\n  return <Modal handleHide={handleHide} disabled={disabled} {...props}>\r\n  <div className=\"px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\r\n   {(title || description) && <div className=\"sm:flex sm:items-start\">\r\n    {icon && <div className=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10\">\r\n            {icon}\r\n          </div>}\r\n\r\n     <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\r\n       {title && <h3 className={`text-lg leading-6 font-medium ${palette.textBold}`} id=\"modal-title\">\r\n         {title}\r\n       </h3>}\r\n       {description && <div className=\"mt-2\">\r\n         <p className={`text-sm ${palette.text}`}>\r\n           {description}\r\n         </p>\r\n       </div>}\r\n     </div>\r\n   </div>}\r\n\r\n   {children}\r\n </div>\r\n {actions && <div className={`${palette.surface1} px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-lg`}>\r\n   {actions}\r\n</div>}\r\n  </Modal>;\r\n}\r\n\r\nexport default TextActionsModal;","import { palette } from '../../palette';\r\nimport Modal from '../modal/modal';\r\nimport Button from '../buttons/button/button';\r\nimport NoButton from '../buttons/noButton/noButton';\r\nimport TextActionsModal from '../textActionsModal/textActionsModal';\r\nimport React from 'react';\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\nfunction ConfirmModal({\r\n    title=\"askContinue\",\r\n    description=\"difficultUndone\",\r\n    cancel=\"cancel\",\r\n    confirm=\"confirm\",\r\n    handleSuccess= () => {},\r\n    handleCancel= () => {},\r\n   ...props\r\n}) {\r\n    const { t, i18n } = useTranslation();\r\n   return <TextActionsModal \r\n    handleHide={handleCancel}\r\n    title={t(title)}\r\n    description={t(description)}\r\n    icon={<svg className=\"h-6 w-6 text-red-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\r\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n  </svg>}\r\n    actions={\r\n      <React.Fragment>\r\n        <NoButton text={t(cancel)} onClick={handleCancel}/>\r\n        <Button text={t(confirm)} onClick={handleSuccess}/>\r\n      </React.Fragment>\r\n    }\r\n   />;\r\n}\r\n\r\nexport default ConfirmModal;","import React, {useState} from \"react\";\r\nimport ConfirmModal from \"../components/confirmModal/confirmModal\";\r\n\r\nconst confirmContext = React.createContext(\r\n    (title, description, handleSuccess, handleCancel) => {}\r\n);\r\n\r\nconst BaseConfirmContextProvider = ({children}) => {\r\n    const [showConfirmDialog, setShowConfirmDialog] = useState(false);\r\n    const handleHideConfirmDialog = () => setShowConfirmDialog(false);\r\n\r\n    const [confirmHandler, setConfirmHandler] = useState(\r\n        {\r\n            title: undefined,\r\n            description: undefined,\r\n            handleSuccess: handleHideConfirmDialog,\r\n            handleCancel: handleHideConfirmDialog,\r\n        }\r\n    );\r\n    const confirm = ({title = undefined, description = undefined, handleSuccess = () => {}, handleCancel = () => {}}) => {\r\n        setShowConfirmDialog(true);\r\n        setConfirmHandler(\r\n            {\r\n              title: title,\r\n              description: description,\r\n              handleSuccess: () => {\r\n                handleHideConfirmDialog();\r\n                handleSuccess();\r\n                },\r\n              handleCancel: () => {\r\n                  handleHideConfirmDialog();\r\n                  handleCancel();\r\n              }\r\n            }\r\n        );\r\n    }\r\n\r\n    return <React.Fragment>\r\n            {showConfirmDialog && <ConfirmModal \r\n                title={confirmHandler.title} \r\n                description={confirmHandler.description} \r\n                handleSuccess={confirmHandler.handleSuccess}\r\n                handleCancel={confirmHandler.handleCancel}\r\n            />}\r\n            <confirmContext.Provider value={confirm}>\r\n                {children}\r\n            </confirmContext.Provider>\r\n        </React.Fragment>;\r\n}\r\n\r\nexport {\r\n  confirmContext,\r\n  BaseConfirmContextProvider\r\n};","import Button from \"../button/button\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\n/**\r\n * Yes (green) button component\r\n */\r\nexport default function YesButton({\r\n  attributes = {},\r\n  text = \"yes\",\r\n  onClick = () => { },\r\n  ...props\r\n}) {\r\n\r\n  const { t, i18n } = useTranslation();\r\n\r\n  return <Button\r\n    onClick={onClick}\r\n    text={t(text)}\r\n    bgColor='bg-green-500 active:hover:bg-green-600'\r\n    textColor='text-white'\r\n    ring='focus:ring-green-500'\r\n    border='border-transparent'\r\n    attributes={attributes}\r\n    {...props}\r\n  />;\r\n}\r\n","import { useLocation } from \"react-router-dom\";\r\n\r\n/**\r\n * useAccessToken returns the restaurantId and accessToken found in the url \r\n * \r\n * @returns a list [restaurantId, accessToken]\r\n */\r\nexport const useAccessToken = () => {\r\n    const search = useLocation().search;\r\n\r\n    const restaurantId = new URLSearchParams(search).get(\"id\");\r\n    const accessToken = new URLSearchParams(search).get(\"token\");\r\n\r\n    return [restaurantId, accessToken];\r\n};","import Cookies from 'js-cookie';\r\n\r\nexport function authHeader() {\r\n    // return authorization header with jwt token\r\n    return { 'X-CSRFToken': Cookies.get('X-CSRF-TOKEN')};\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { attemptLogin } from \"../../services/loginWithAccessToken\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { userContext, TYPE_ACCESS_TOKEN } from \"../../../../contexts/userContext\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n/**\r\n * useLoginWithAccessToken returns a bool (true if correctly logged in)\r\n * \r\n * @returns a bool (loggedIn)\r\n */\r\nexport const useLoginWithAccessToken = (restaurantId, accessToken) => {\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const userCtx = React.useContext(userContext);\r\n    const { t, i18n } = useTranslation();\r\n    \r\n    useEffect(() => {\r\n        userCtx.setType(null);\r\n        attemptLogin(restaurantId, accessToken)\r\n            .then(([isValid, params]) => {\r\n                if (!isValid) {\r\n                    enqueueSnackbar(t(\"errorPageAccess\"), {variant: 'warning'});\r\n                    return;\r\n                }\r\n                userCtx.setType(TYPE_ACCESS_TOKEN);\r\n                userCtx.setParams(params);\r\n            })\r\n            .catch(_ => enqueueSnackbar(t(\"something went wrong\"), {variant: 'error'}));\r\n    }, [restaurantId, accessToken]);\r\n\r\n    return [userCtx.loggedIn, () => userCtx.setType(TYPE_ACCESS_TOKEN)];\r\n};","import { authHeader } from \"../../../helpers/csrfCookieHeader\";\r\nimport axios from \"axios\";\r\n\r\nexport const attemptLogin = (restaurantId, accessToken) => {\r\n    return new Promise(function(resolve, reject) {\r\n        axios({url: `${process.env.REACT_APP_BACKEND_URL}/auth/v1/login/accessToken`,\r\n            method: 'POST',\r\n            auth: {\r\n                username: restaurantId,\r\n                password: accessToken\r\n            },\r\n            headers: {'Cache-Control': 'no-cache', ...authHeader()}\r\n        })\r\n        .then(res => resolve([true, res.data]))\r\n        .catch(function (res) {\r\n            try { if (res[\"response\"][\"status\"] === 401) resolve([false, null]) } catch(err){}\r\n            reject(res);\r\n        });\r\n    });\r\n}\r\n\r\n","import { DateTime } from 'luxon';\r\n\r\nexport const parseTable = (table) => {\r\n    table['last_course_datetime'] = new DateTime.fromISO(table['last_course_datetime'], {zone: 'utc'});\r\n    return table;\r\n}\r\n\r\nexport const parseTables = (_tables) => {\r\n    let tables = {};\r\n    _tables.forEach((table) => {\r\n        tables[table.id] = parseTable(table);\r\n    });\r\n    return tables;\r\n}","import { useState } from \"react\";\r\n\r\n/**\r\n * a wrapper around useState which implements a queue\r\n * \r\n * @param key the name of the key used as id \r\n */\r\nexport const useQueueState = (default_=[]) => {\r\n    const [queue, setQueue] = useState(default_);\r\n    const push = (item) => setQueue(queue => [...queue, item]);\r\n    const serve = (idx) => setQueue(queue => { \r\n        queue.splice(idx, 1);\r\n        return setQueue([...queue]);\r\n        }\r\n    );\r\n    \r\n    return {\r\n        queue: queue,\r\n        push: push,\r\n        serve: serve,\r\n        serveFirst: () => serve(0),\r\n        serveAll: () => setQueue([]),\r\n        isEmpty: () => queue.length === 0\r\n    };\r\n  }","import React, { useEffect, useState } from \"react\";\r\nimport { useAccessToken } from \"../../hooks/useAccessToken/useAccessToken\";\r\nimport { useLoginWithAccessToken } from \"../../hooks/useLoginWithAccessToken/useLoginWithAccessToken\";\r\nimport { io } from \"socket.io-client\";\r\nimport { parseTable, parseTables } from \"./_tableUtils\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { useQueueState } from \"../../../../hooks/useQueueState/useQueueState\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst ENDPOINT = process.env.REACT_APP_BACKEND_URL;\r\n\r\n\r\nexport const realtimeServiceContext = React.createContext(\r\n    {\r\n        tables: [],\r\n        setTables: (tables) => {},\r\n        addTable: (table) => {},\r\n        finishTable: (id) => {},\r\n        nextCourse: (id) => {},\r\n        deleteTable: (id) => {}\r\n    }\r\n);\r\n\r\n\r\nexport const RealtimeServiceContextProvider = ({ children }) => {\r\n    const {enqueueSnackbar} = useSnackbar();\r\n\r\n    /***************** data *****************/\r\n    const [tables, setTables] = useState({});\r\n\r\n    /***************** auth *****************/\r\n    const [restaurantId, accessToken] = useAccessToken();\r\n    const [loggedIn, _] = useLoginWithAccessToken(restaurantId, accessToken);\r\n    \r\n    /**************** socket ****************/\r\n    const [socket, setSocket] = useState(null);\r\n\r\n    const { t, i18n } = useTranslation();\r\n\r\n    useEffect(() => {\r\n        if (!loggedIn) return;\r\n\r\n        const newSocket = io(ENDPOINT);\r\n        setSocket(newSocket);\r\n        return () => newSocket.close();\r\n    }, [loggedIn]);\r\n\r\n    \r\n    useEffect(() => {\r\n        if (socket === null) return;\r\n\r\n        socket.on(\"v1.tables\", data => {\r\n            setTables(parseTables(data.tables));\r\n        });\r\n        socket.on(\"v1.tables.new\", data => {\r\n            setTables(tables => ({...tables, [data.table.id]: parseTable(data.table)}));\r\n        });\r\n        socket.on(\"v1.tables.finish\", data => {\r\n            const table = data.table;\r\n\r\n            setTables(tables => {\r\n                delete tables[table.id];\r\n                return {...tables}\r\n            });\r\n\r\n            enqueueSnackbar(`${t(\"table\")} ${table.number} ${t(\"markedFinish\")}`, {variant: 'success'});\r\n        });\r\n        socket.on(\"v1.tables.next\", data => {\r\n            const table = parseTable(data.table);\r\n\r\n            setTables(tables => {\r\n                tables[table.id] = table;\r\n                return {...tables}\r\n            });\r\n\r\n            enqueueSnackbar(`${t(\"table\")} ${table.number} ${t(\"servedWaiting\")} ${table.next_course}`, {variant: 'success'});\r\n        });\r\n        socket.on(\"v1.tables.delete\", data => {\r\n            const table = data.table;\r\n\r\n            setTables(tables => {\r\n                delete tables[table.id];\r\n                return {...tables}\r\n            });\r\n\r\n            enqueueSnackbar(`${t(\"table\")} ${table.number} ${t(\"has been deleted\")}`, {variant: 'warning'});\r\n        });\r\n    }, [socket]);\r\n\r\n    /************ context provider **********/\r\n\r\n    // new\r\n    const newItems = useQueueState();\r\n    useEffect(() => {\r\n        if (socket === null) return;\r\n        if (newItems.isEmpty()) return;\r\n\r\n        newItems.queue.map(table => {\r\n            socket.emit(\"v1.tables.new\", {number: table});\r\n        });\r\n        \r\n        newItems.serveAll();\r\n    }, [newItems, socket]);\r\n    const addTable = (table) => newItems.push(table);\r\n\r\n    // finish\r\n    const finishedTables = useQueueState();\r\n    useEffect(() => {\r\n        if (socket === null) return;\r\n        if (finishedTables.isEmpty()) return;\r\n\r\n        finishedTables.queue.map(id => {\r\n            socket.emit(\"v1.tables.finish\", {id: id});\r\n        });\r\n        \r\n        finishedTables.serveAll();\r\n    }, [finishedTables, socket]);\r\n    const finishTable = (id) => finishedTables.push(id);\r\n\r\n    // next\r\n    const nextTables = useQueueState();\r\n    useEffect(() => {\r\n        if (socket === null) return;\r\n        if (nextTables.isEmpty()) return;\r\n\r\n        nextTables.queue.map(id => {\r\n            socket.emit(\"v1.tables.next\", {id: id});\r\n        });\r\n        \r\n        nextTables.serveAll();\r\n    }, [nextTables, socket]);\r\n    const nextCourse = (id) => nextTables.push(id);\r\n\r\n    // next\r\n    const deleteTables = useQueueState();\r\n    useEffect(() => {\r\n        if (socket === null) return;\r\n        if (deleteTables.isEmpty()) return;\r\n\r\n        deleteTables.queue.map(id => {\r\n            socket.emit(\"v1.tables.delete\", {id: id});\r\n        });\r\n        \r\n        deleteTables.serveAll();\r\n    }, [deleteTables, socket]);\r\n    const deleteTable = (id) => deleteTables.push(id);\r\n\r\n    const contextProvider = {\r\n        tables: Object.values(tables),\r\n        setTables: () => {},\r\n        addTable: addTable,\r\n        finishTable: finishTable,\r\n        nextCourse: nextCourse,\r\n        deleteTable: deleteTable\r\n    };\r\n\r\n    return <realtimeServiceContext.Provider value={contextProvider}>\r\n        {children}\r\n    </realtimeServiceContext.Provider>;\r\n}\r\n","import ConfirmModal from '../../../../components/confirmModal/confirmModal';\r\nimport {twoPadding} from '../../../../helpers/numberPadding';\r\nimport React from 'react';\r\nimport { confirmContext } from '../../../../contexts/confirmContext';\r\nimport TextActionsModal from '../../../../components/textActionsModal/textActionsModal';\r\nimport Button from '../../../../components/buttons/button/button';\r\nimport YesButton from '../../../../components/buttons/yesButton/yesButton';\r\nimport NoButton from '../../../../components/buttons/noButton/noButton';\r\nimport { realtimeServiceContext } from '../../contexts/realtimeService/realtimeServiceContext';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction ActionMenu({\r\n    table,\r\n    handleHide=()=>{},\r\n    handleShow=()=>{},\r\n   ...props\r\n}) {\r\n    const confirm = React.useContext(confirmContext);\r\n    const realtimeCtx = React.useContext(realtimeServiceContext);\r\n    const { t, i18n } = useTranslation();\r\n\r\n    const handleFinish = () => {\r\n        handleHide();\r\n        confirm({\r\n            handleSuccess: () => {\r\n                realtimeCtx.finishTable(table.id);\r\n            },\r\n            handleCancel: () => {\r\n                handleShow();\r\n            }})\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        handleHide();\r\n        confirm({\r\n            handleSuccess: () => {\r\n                realtimeCtx.deleteTable(table.id);\r\n            },\r\n            handleCancel: () => {\r\n                handleShow();\r\n            }})\r\n    };\r\n\r\n    const isLastCourse = table.next_course === 'desserts';\r\n\r\n    const handleNext = () => {\r\n        handleHide();\r\n\r\n        if (!isLastCourse) {\r\n            realtimeCtx.nextCourse(table.id);\r\n            return;\r\n        }\r\n        \r\n        confirm({\r\n            title: 'serve desserts and finalize table?',\r\n            handleSuccess: () => {\r\n                realtimeCtx.finishTable(table.id);\r\n            },\r\n            handleCancel: () => {\r\n                handleShow();\r\n            }})\r\n       \r\n    }\r\n    const lastCourse = table.last_course_datetime.toLocal();\r\n\r\n   \r\n   return <React.Fragment>\r\n       <ConfirmModal />\r\n       <TextActionsModal\r\n      handleHide={handleHide}\r\n      title={`${t(\"table\")} ${table.number}`}\r\n      description={`${t(\"timeLastCourse\")} ${twoPadding(lastCourse.hour)}:${twoPadding(lastCourse.minute)}`}\r\n      actions={<React.Fragment>\r\n          <NoButton onClick={handleHide} text= {t(\"cancel\")} />\r\n            <YesButton onClick={handleNext} text={isLastCourse? t(\"dessertsAndEnd\"): t(\"next course\")} />\r\n            {!isLastCourse && <Button onClick={handleFinish} text={t(\"finish\")} />}\r\n            <Button onClick={handleDelete} text={t(\"delete\")} />\r\n      </React.Fragment>}\r\n      {...props} />\r\n    </React.Fragment>;\r\n}\r\n\r\nexport default ActionMenu;","import BaseCard from './baseCard';\r\nimport { StopWatch } from '../stopWatch/stopWatch';\r\nimport ActionMenu from '../actionMenu/actionMenu';\r\nimport React from 'react';\r\nimport { useState } from 'react';\r\nimport { userContext } from '../../../../contexts/userContext';\r\n\r\nconst STATUS_ALARM = 'alarm';\r\nconst STATUS_WARNING = 'warning';\r\n\r\nconst useTheme = (status) => (status === STATUS_ALARM ? {\r\n   bg: 'bg-red-400 hover:bg-red-500',\r\n   fg: 'bg-red-100',\r\n   text: 'text-gray-800'\r\n} : status === STATUS_WARNING ? {\r\n   bg: 'bg-yellow-200 hover:bg-yellow-300',\r\n   fg: 'bg-yellow-100',\r\n   text: 'text-gray-800'\r\n} : {\r\n   bg: 'bg-green-200 hover:bg-green-300',\r\n   fg: 'bg-green-50',\r\n   text: 'text-gray-800'\r\n});\r\n\r\nfunction TableCard({\r\n   table,\r\n   ...props\r\n}) {\r\n\r\n   const userCtx = React.useContext(userContext);\r\n   const [showActionMenu, setShowActionMenu] = useState(false);\r\n   const handleShowActionMenu = () => setShowActionMenu(true);\r\n   const handleHideActionMenu = () => setShowActionMenu(false);\r\n\r\n   const [status, setStatus] = useState('ok');\r\n   const theme = useTheme(status);\r\n\r\n   const handleStatus = (delta) => {\r\n      const minutes = delta / (1000 * 60);\r\n      if (minutes > userCtx.params.alarmMinutes) return setStatus(STATUS_ALARM);\r\n      if (minutes > userCtx.params.warningMinutes) return setStatus(STATUS_WARNING);\r\n      setStatus('ok');\r\n   }\r\n\r\n   return <React.Fragment>\r\n\r\n      {showActionMenu && <ActionMenu handleHide={handleHideActionMenu} handleShow={handleShowActionMenu} table={table} />}\r\n\r\n      <BaseCard attributes={{ [theme.bg]: true }} onClick={handleShowActionMenu} {...props}>\r\n\r\n         <div className={`flex-2 flex flex-col ${theme.text}`}>\r\n            <div className=\"flex-1\">\r\n               <p className=\"font-mono text-4xl\">\r\n                  <StopWatch startTime={table.last_course_datetime} notifyDelta={handleStatus} precision='seconds' />\r\n               </p>\r\n            </div>\r\n            <div className=\"flex space-x-4 pt-4\" >\r\n               <div className=\"text-left\">\r\n                  <span className={`inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold mr-2 mb-2 bottom-0 left-0 ${theme.fg}`}>\r\n                     {table.next_course}\r\n                  </span>\r\n               </div>\r\n               <div className=\"flex-1\">\r\n                  <p className=\"font-mono text-right text-4xl\">\r\n                     {table.number}\r\n                  </p>\r\n               </div>\r\n            </div>\r\n         </div>\r\n\r\n\r\n\r\n\r\n      </BaseCard></React.Fragment>;\r\n}\r\n\r\nexport default TableCard;","import {Field} from 'formik';\r\nimport { palette } from '../../../palette';\r\n\r\n/**\r\n * Base input component\r\n */\r\nexport default function Input({\r\n    name,\r\n    label=null,\r\n    type='text',\r\n    lead=null,\r\n    trail=null,\r\n    placeholder='',\r\n    ...props\r\n}) {\r\n\r\n    return <Field type={type} name={name} > \r\n    \r\n    {({\r\n               field, // { name, value, onChange, onBlur }\r\n               form: { touched, errors }, // also values, setXXXX, handleXXXX, dirty, isValid, status, etc.\r\n               meta,\r\n             }) => <div>\r\n             {label && <label for={name} className={`block text-sm font-medium ${palette.text}`}>{label}</label>}\r\n             \r\n             {meta.touched && meta.error && (\r\n                   <label for={name} className=\"block text-sm font-medium text-red-700\">{meta.error}</label>\r\n                 )}\r\n             <div className=\"mt-1 relative rounded-md shadow-sm\">\r\n                 {lead && <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                     <span className={`${palette.textLight} sm:text-sm`}>\r\n                         {lead}\r\n                     </span>\r\n                 </div>}\r\n                 <input  {...props} type={type} name={name} id={name} className={`block w-full p-2 ${lead? 'pl-7': ''} ${trail? 'pr-7': ''} sm:text-sm text-gray-900 rounded-md`} placeholder={placeholder} {...field}  />\r\n                 {trail && <div className=\"absolute inset-y-0 right-0 flex items-center pointer-events-none\">\r\n                     <span className={`${palette.textLight} sm:text-sm`}>\r\n                         {trail}\r\n                     </span>\r\n                 </div>}\r\n             </div>\r\n         </div>}\r\n    \r\n    </Field>;\r\n}\r\n","import TextActionsModal from '../textActionsModal/textActionsModal';\r\nimport ConfirmModal from '../confirmModal/confirmModal';\r\nimport NoButton from '../buttons/noButton/noButton';\r\nimport React from 'react';\r\nimport YesButton from '../buttons/yesButton/yesButton';\r\nimport Input from '../inputs/input/input';\r\nimport {Formik, Form} from 'formik';\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\nexport default function QuestionModal({\r\n  title = null,\r\n  description = null,\r\n  handleHide = () => { },\r\n  handleShow = () => { },\r\n  handleCancel = () => { },\r\n  handleSubmit = (_) => new Promise.resolve(),\r\n  ...props\r\n}) {\r\n\r\n  const { t, i18n } = useTranslation();\r\n  return <Formik\r\n       initialValues={{ question: '' }}\r\n       onSubmit={(values, { setSubmitting, setErrors}) => {\r\n          handleSubmit(values.question).then(() => {\r\n            handleHide();\r\n            setSubmitting(false);\r\n          }, () => {\r\n            setErrors({question: t(\"unable to finalize request\")});\r\n            setSubmitting(false);\r\n          });\r\n       }}\r\n     >\r\n       {({ isSubmitting }) => (\r\n         <Form>\r\n           <TextActionsModal\r\n              handleHide={handleHide}\r\n              title={title}\r\n              description={description}\r\n              disabled={isSubmitting}\r\n              actions={<React.Fragment>\r\n                <NoButton onClick={() => {\r\n                  handleHide();\r\n                  handleCancel();\r\n                  }} text={t(\"cancel\")} disabled={isSubmitting} />\r\n                <YesButton text={t(\"submit\")} type=\"submit\" disabled={isSubmitting} loading={isSubmitting} />\r\n              </React.Fragment>}\r\n              {...props}>\r\n\r\n              <div className='p-4 pt-4'>\r\n                <Input name=\"question\"/>\r\n              </div>\r\n            </TextActionsModal>\r\n         </Form>\r\n       )}\r\n     </Formik>;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport QuestionModal from \"../components/questionModal/questionModal\";\r\n\r\nexport const questionContext = React.createContext(\r\n    { prompt: (title, description, handleSubmit, handleCancel) => { } }\r\n);\r\n\r\nexport const QuestionContextProvider = ({ children }) => {\r\n    const [showDialog, setShowDialog] = useState(false);\r\n    const handleHideDialog = () => setShowDialog(false);\r\n    const handleShowDialog = () => setShowDialog(true);\r\n\r\n    const [handlers, setHandlers] = useState(\r\n        {\r\n            title: null,\r\n            description: null,\r\n            handleSubmit: handleHideDialog,\r\n            handleCancel: handleHideDialog,\r\n        }\r\n    );\r\n    const prompt = ({ title = null, description = null, handleSubmit = () => new Promise.resolve(), handleCancel = () => { } }) => {\r\n        setHandlers(\r\n            {\r\n                title: title,\r\n                description: description,\r\n                handleSubmit: (...value) => new Promise(function (resolve, reject) {\r\n                    handleSubmit(...value)\r\n                        .then(\r\n                            (...args) => {\r\n                                resolve(...args);\r\n                                handleHideDialog();\r\n                            },\r\n                            (...args) => reject(...args)\r\n                        );\r\n                }),\r\n                handleCancel: () => {\r\n                    handleHideDialog();\r\n                    handleCancel();\r\n                }\r\n            }\r\n        );\r\n        handleShowDialog();\r\n    }\r\n\r\n    return <React.Fragment>\r\n        {showDialog && <QuestionModal\r\n            title={handlers.title}\r\n            description={handlers.description}\r\n            handleSubmit={handlers.handleSubmit}\r\n            handleCancel={handlers.handleCancel}\r\n            handleHide={handleHideDialog}\r\n            handleShow={handleShowDialog}\r\n        />}\r\n        <questionContext.Provider value={{ prompt: prompt }}>\r\n            {children}\r\n        </questionContext.Provider>\r\n    </React.Fragment>;\r\n}","import TextActionsModal from '../../../../components/textActionsModal/textActionsModal';\r\nimport NoButton from '../../../../components/buttons/noButton/noButton';\r\nimport React, { useEffect, useState } from 'react';\r\nimport YesButton from '../../../../components/buttons/yesButton/yesButton';\r\nimport Button from '../../../../components/buttons/button/button';\r\nimport { questionContext } from '../../../../contexts/questionContext';\r\nimport { userContext } from '../../../../contexts/userContext';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst tryParseInt = (x) => parseInt(x) ?? x;\r\n\r\nexport default function NewTableMenu({\r\n  handleHide = () => { },\r\n  handleShow = () => { },\r\n  addNewTable = (_) => { },\r\n  existingTableNumbers = [],\r\n  ...props\r\n}) {\r\n  const userCtx = React.useContext(userContext);\r\n  const { t, i18n } = useTranslation();\r\n\r\n    const [defaultTables, setDefaultTables] = useState([]);\r\n    useEffect(() => {\r\n      setDefaultTables((userCtx.params['defaultTables'] ?? [])\r\n      .map(table => table.name)\r\n      .sort((a, b) => tryParseInt(a) - tryParseInt(b)));\r\n    }, [userCtx.params['defaultTables']]);\r\n    \r\n  const handleNewTable = (tableNumber) => {\r\n    return new Promise(function (resolve, reject) {\r\n      addNewTable(tableNumber);\r\n      handleHide();\r\n      setLoading(false);\r\n      resolve();\r\n    });\r\n  }\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const prompt = React.useContext(questionContext);\r\n  const handleAskCustomInput = () => {\r\n    handleHide();\r\n    prompt.prompt({\r\n      title: t(\"table #\"),\r\n      handleSubmit: (result) => new Promise(function (resolve, reject) {\r\n        handleNewTable(result).then(() => resolve(), () => reject())\r\n      }),\r\n      handleCancel: handleShow\r\n    });\r\n  }\r\n\r\n  const handleNewDefaultTable = (number) => {\r\n    setLoading(number);\r\n    handleNewTable(number);\r\n  }\r\n\r\n  return <React.Fragment>\r\n    <TextActionsModal\r\n      handleHide={handleHide}\r\n      title={t(\"new table2\")}\r\n      description={t(\"startTimerTable\")}\r\n      disabled={loading !== false}\r\n      actions={<React.Fragment>\r\n        <NoButton onClick={handleHide} text={t(\"cancel\")} disabled={loading!==false} />\r\n        <YesButton onClick={handleAskCustomInput} text={t(\"custom\")} disabled={loading!==false} />\r\n      </React.Fragment>}\r\n      {...props}>\r\n\r\n      <div className='p-1 pt-4'>\r\n        {defaultTables.filter(table => !existingTableNumbers.includes(table)).map(tableName => \r\n        <Button loading={loading===tableName} disabled={loading!==false} onClick={() => handleNewDefaultTable(tableName)} text={tableName} key={tableName} />)}\r\n      </div>\r\n    </TextActionsModal>\r\n  </React.Fragment>;\r\n}\r\n","import BaseCard from './baseCard';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { palette } from '../../../../palette';\r\nimport React, {useState} from 'react';\r\nimport NewTableMenu from '../newTableMenu/newTableMenu';\r\n\r\nfunction NewTableCard({\r\n   addNewTable = (_) => {},\r\n   existingTableNumbers = [],\r\n   ...props\r\n}) {\r\n   const { t, i18n } = useTranslation();\r\n\r\n   const [showNewTableMenu, setShowNewTableMenu] = useState(false);\r\n   const handleShowNewTableMenu = () => setShowNewTableMenu(true);\r\n   const handleHideNewTableMenu = () => setShowNewTableMenu(false);\r\n\r\n   return <React.Fragment>\r\n      {showNewTableMenu && <NewTableMenu \r\n      handleHide={handleHideNewTableMenu} \r\n      handleShow={handleShowNewTableMenu} \r\n      addNewTable={addNewTable}\r\n      existingTableNumbers={existingTableNumbers}\r\n      />}\r\n   <BaseCard onClick={handleShowNewTableMenu} attributes={{\r\n      'border-4': true, \r\n   'border-dashed': true, \r\n   [palette.bg_force_responsive]: true,\r\n   [palette.text]: true}} {...props} disabled={false}>\r\n      <div className='h-full w-full flex flex-wrap content-center text-center justify-center'>\r\n            <p className=\"font-mono text-4xl\">\r\n               {t('new')} \r\n            </p>\r\n            </div>\r\n   </BaseCard></React.Fragment>;\r\n}\r\n\r\nexport default NewTableCard;","import React from 'react';\r\n\r\nexport const SORT_PRIORITY = 'priority';\r\nexport const SORT_NUMBER_ASCENDING = 'number-ascending';\r\nexport const SORT_NUMBER_DESCENDING = 'number-descending';\r\nconst SORTS = [SORT_PRIORITY, SORT_NUMBER_ASCENDING, SORT_NUMBER_DESCENDING];\r\n\r\nfunction SortButton({\r\n    sort, setSort\r\n}) {\r\n\r\n    const handleToggleSort = () => setSort(SORTS[(SORTS.indexOf(sort) + 1) % SORTS.length]);\r\n    \r\n    return <div className='p-2 inline-block'><div onClick={handleToggleSort} className=\"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n         {sort === SORT_PRIORITY?  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n        : sort === SORT_NUMBER_ASCENDING? <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12\" />\r\n        : <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4\" />\r\n}\r\n        </svg>\r\n    </div></div>;\r\n}\r\n\r\nexport default SortButton;","import React, { useState } from \"react\";\r\n\r\nexport const THEME_LIGHT = 'light';\r\nexport const THEME_DARK = 'dark';\r\nconst THEMES = [THEME_LIGHT, THEME_DARK];\r\n\r\nconst LOCALSTORAGE_THEME = 'theme';\r\n\r\nexport const themeContext = React.createContext(\r\n    {\r\n        theme: THEME_LIGHT,\r\n        setTheme: (theme) => { },\r\n        setLight: () => { },\r\n        setDark: () => { },\r\n        toggle: () => {},\r\n        isLight: true,\r\n        isDark: false\r\n    }\r\n);\r\n\r\nexport const ThemeContextProvider = ({ children }) => {\r\n    const [theme, _setTheme] = useState(localStorage.getItem(LOCALSTORAGE_THEME) === THEME_DARK? THEME_DARK: THEME_LIGHT);\r\n    const setTheme = (newTheme) => {\r\n        if (!THEMES.includes(newTheme)) throw new Error(`invalid theme '${newTheme}' is not one of the valid options: '${THEMES}'`);\r\n        _setTheme(newTheme);\r\n        localStorage.setItem(LOCALSTORAGE_THEME, newTheme);\r\n    }\r\n\r\n    const contextProvider = {\r\n        theme: theme,\r\n        setTheme: setTheme,\r\n        setLight: () => setTheme(THEME_LIGHT),\r\n        setDark: () => setTheme(THEME_DARK),\r\n        toggle: () => setTheme(THEMES[(THEMES.indexOf(theme) + 1) % THEMES.length]),\r\n        isLight: theme === THEME_LIGHT,\r\n        isDark: theme === THEME_DARK\r\n    };\r\n\r\n    return <themeContext.Provider value={contextProvider}>\r\n        <div className={theme === THEME_DARK ? 'dark' : undefined}>\r\n            {children}\r\n        </div>\r\n    </themeContext.Provider>;\r\n}\r\n","import React from 'react';\r\nimport { themeContext } from '../../contexts/themeContext';\r\n\r\n\r\nexport default function ThemeButton() {\r\n    const themeCtx = React.useContext(themeContext);\r\n    \r\n    return <div className='p-2 inline-block'><div onClick={themeCtx.toggle} className=\"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n         {\r\n             themeCtx.isLight?\r\n             <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\r\n            :<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n          \r\n         }\r\n        </svg>\r\n    </div></div>;\r\n}","import React, { useState } from \"react\";\r\nimport i18n from \"../i18n\";\r\n\r\nexport const LANGUAGE_EN = 'en';\r\nexport const LANGUAGE_ES = 'es';\r\nconst LANGUAGES = [LANGUAGE_EN, LANGUAGE_ES];\r\n\r\nconst LOCALSTORAGE_LANGUAGE = 'language';\r\n\r\nexport const languageContext = React.createContext(\r\n    {\r\n        language: LANGUAGE_EN,\r\n        setLanguage: (language) => { },\r\n        toggle: () => {}\r\n    }\r\n);\r\n\r\nexport const LanguageContextProvider = ({ children }) => {\r\n    const localStorageLanguage = localStorage.getItem(LOCALSTORAGE_LANGUAGE);\r\n    const [language, _setLanguage] = useState(LANGUAGES.includes(localStorageLanguage)? localStorageLanguage: LANGUAGE_EN);\r\n    const setLanguage = (newLanguage) => {\r\n        if (!LANGUAGES.includes(newLanguage)) throw new Error(`invalid language '${newLanguage}' is not one of the valid options: '${LANGUAGES}'`);\r\n        _setLanguage(newLanguage);\r\n        localStorage.setItem(LOCALSTORAGE_LANGUAGE, newLanguage);\r\n        i18n.changeLanguage(newLanguage);\r\n    }\r\n\r\n    const contextProvider = {\r\n        language: language,\r\n        setLanguage: setLanguage,\r\n        toggle: () => setLanguage(LANGUAGES[(LANGUAGES.indexOf(language) + 1) % LANGUAGES.length])\r\n    };\r\n\r\n    return <languageContext.Provider value={contextProvider}>\r\n            {children}\r\n    </languageContext.Provider>;\r\n}\r\n","import React from 'react';\r\nimport { languageContext } from '../../contexts/languageContext';\r\n\r\n\r\nexport default function LanguageButton() {\r\n    const languageCtx = React.useContext(languageContext);\r\n    \r\n    return <div className='p-2 inline-block'><div onClick={languageCtx.toggle} className=\"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n         <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129\" />\r\n        </svg>\r\n    </div></div>;\r\n}","import TableCard from './components/tableCard/tableCard';\r\nimport NewTableCard from './components/tableCard/newTableCard';\r\nimport SortButton, { SORT_PRIORITY, SORT_NUMBER_ASCENDING, SORT_NUMBER_DESCENDING } from './components/sortButton/sortButton';\r\nimport { useState, useEffect } from 'react';\r\nimport ThemeButton from '../../components/themeButton/themeButton';\r\nimport LanguageButton from '../../components/languageButton/languageButton';\r\nimport { palette } from '../../palette';\r\nimport { RealtimeServiceContextProvider, realtimeServiceContext } from './contexts/realtimeService/realtimeServiceContext';\r\nimport React from 'react';\r\nimport { userContext } from '../../contexts/userContext';\r\n\r\nconst tryParseInt = (x) => parseInt(x) ?? x;\r\n\r\nconst sortProviders = {\r\n  [SORT_PRIORITY]: (table1, table2) => table1.last_course_datetime.toMillis() - table2.last_course_datetime.toMillis(),\r\n  [SORT_NUMBER_ASCENDING]: (table1, table2) => tryParseInt(table1.number) - tryParseInt(table2.number),\r\n  [SORT_NUMBER_DESCENDING]: (table1, table2) => tryParseInt(table2.number) - tryParseInt(table1.number),\r\n}\r\nfunction _RestaurantDashboardPage() {\r\n  const realtimeCtx = React.useContext(realtimeServiceContext);\r\n  const userCtx = React.useContext(userContext);\r\n\r\n  const [sort, setSort] = useState(SORT_PRIORITY);\r\n  const tables = realtimeCtx.tables;\r\n  const [sortedTables, _setSortedTables] = useState([]);\r\n\r\n  const setSortedTables = (newTables) => {\r\n    newTables.sort(sortProviders[sort]);\r\n    _setSortedTables([...newTables]);\r\n  }\r\n  useEffect(() => setSortedTables(tables), [tables, sort]);\r\n\r\n  return <div>\r\n    <div className='p-2 pt-4 pl-8 pr-8 inline-block w-full'>\r\n      <div className='inline-block'><p className={`font-mono text-4xl ${palette.text}`}>\r\n       {userCtx.params.restaurantName ?? \"...\"}\r\n      </p></div>\r\n      <div className='float-right'>\r\n        <SortButton sort={sort} setSort={setSort} />\r\n        <ThemeButton />\r\n        <LanguageButton /></div>\r\n\r\n    </div>\r\n\r\n    <div className=\"p-4\">\r\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5\">\r\n        <NewTableCard addNewTable={realtimeCtx.addTable} existingTableNumbers={tables.map(table => table.number)} />\r\n\r\n        {sortedTables.map(table =>\r\n          <TableCard table={table} key={table.id} />)}\r\n      </div>\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nfunction RestaurantDashboardPage() {\r\n\r\n  return <RealtimeServiceContextProvider>\r\n    <_RestaurantDashboardPage />\r\n    </RealtimeServiceContextProvider>;\r\n}\r\n\r\nexport default RestaurantDashboardPage;","import React from 'react';\r\n\r\nexport default function PrivacyButton({privacyFilter, setPrivacyFilter}) {\r\n    \r\n    return <div className='p-2 inline-block'><div onClick={() => setPrivacyFilter(!privacyFilter)} className=\"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n         \r\n        {privacyFilter? <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />: <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z\" />\r\n            }\r\n\r\n        </svg>\r\n    </div></div>;\r\n}","import React from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useGoogleLogout} from 'react-google-login';\r\nimport { useSnackbar } from 'notistack';\r\nimport { logout } from '../../services/logout';\r\n\r\nconst clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\n\r\nexport default function SignOutButton({}) {\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n  let history = useHistory();\r\n    const onLogoutSuccess = () => {\r\n      logout().then(() => {\r\n        enqueueSnackbar('logged out', {variant: 'success'})\r\n        history.push('/login');\r\n      }).catch(() => {\r\n        enqueueSnackbar('unable to log out with server', {variant: 'error'})\r\n      })\r\n    \r\n    }\r\n    \r\n    const onLogoutFailure = () => {\r\n      enqueueSnackbar('unable to out with Google', {variant: 'error'})\r\n    }\r\n\r\n  const { signOut } = useGoogleLogout({\r\n    clientId,\r\n      onLogoutSuccess,\r\n      onLogoutFailure\r\n  });\r\n\r\n  \r\n    \r\n    return <div className='p-2 inline-block'><div onClick={signOut} className=\"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n         <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\r\n        </svg>\r\n    </div></div>;\r\n}","import { authHeader } from \"../../../helpers/csrfCookieHeader\";\r\nimport axios from \"axios\";\r\n\r\nexport const logout = () => {\r\n    return new Promise(function(resolve, reject) {\r\n        axios({url: `${process.env.REACT_APP_BACKEND_URL}/auth/v1/logout`,\r\n            method: 'POST',\r\n            headers: {'Cache-Control': 'no-cache', ...authHeader()}\r\n        })\r\n        .then(_ => resolve())\r\n        .catch(_ => reject());\r\n    });\r\n}\r\n\r\n","import { palette } from \"../../../../palette\";\r\n\r\nexport default function Zone({title=null, children=null}) {\r\n    return <div className={`m-4 p-4 rounded-lg ${palette.surface2}`}>\r\n    {title && <p className={`font-mono select-none text-2xl ${palette.text}`}>\r\n      {title}\r\n    </p>}\r\n    <div className='p-4'>\r\n      {children}\r\n    </div>\r\n  </div>;\r\n}","import { authHeader } from \"../helpers/csrfCookieHeader\";\r\nimport axios from \"axios\";\r\n\r\nexport const get = (endpoint, onThen = (data, resolve, reject) => resolve(data), onCatch = (res, resolve, reject) => reject()) => {\r\n    return new Promise(function (resolve, reject) {\r\n        axios({\r\n            url: `${process.env.REACT_APP_BACKEND_URL}/api/v1${endpoint}`,\r\n            method: 'GET',\r\n            headers: { 'Cache-Control': 'no-cache', ...authHeader() }\r\n        })\r\n            .then(res => onThen(res.data, resolve, reject))\r\n            .catch(res => onCatch(res, resolve, reject));\r\n    });\r\n}\r\n\r\nexport const post = (endpoint, data, onThen = (data, resolve, reject) => resolve(data), onCatch = (res, resolve, reject) => reject()) => {\r\n    return new Promise(function (resolve, reject) {\r\n        axios({\r\n            url: `${process.env.REACT_APP_BACKEND_URL}/api/v1${endpoint}`,\r\n            method: 'POST',\r\n            data: data,\r\n            headers: { 'Cache-Control': 'no-cache', ...authHeader() }\r\n        })\r\n            .then(res => onThen(res.data, resolve, reject))\r\n            .catch(res => onCatch(res, resolve, reject));\r\n    });\r\n}\r\n\r\nexport const patch = (endpoint, id, data, onThen = (data, resolve, reject) => resolve(data), onCatch = (res, resolve, reject) => reject()) => {\r\n    return new Promise(function (resolve, reject) {\r\n        axios({\r\n            url: `${process.env.REACT_APP_BACKEND_URL}/api/v1${endpoint}/${id}`,\r\n            method: 'PATCH',\r\n            data: data,\r\n            headers: { 'Cache-Control': 'no-cache', ...authHeader() }\r\n        })\r\n            .then(res => onThen(res.data, resolve, reject))\r\n            .catch(res => onCatch(res, resolve, reject));\r\n    });\r\n}\r\n\r\n\r\nexport const remove = (endpoint, id, onThen = (res, resolve, reject) => resolve(res), onCatch = (res, resolve, reject) => reject()) => {\r\n    return new Promise(function (resolve, reject) {\r\n        axios({\r\n            url: `${process.env.REACT_APP_BACKEND_URL}/api/v1${endpoint}/${id}`,\r\n            method: 'DELETE',\r\n            headers: { 'Cache-Control': 'no-cache', ...authHeader() }\r\n        })\r\n            .then(res => onThen(res, resolve, reject))\r\n            .catch(res => onCatch(res, resolve, reject));\r\n    });\r\n}\r\n","import {get, post, patch, remove} from '../../../services/crudApi';\r\n\r\nconst getEndpoint = (restaurantId) => `/restaurants/${restaurantId}/accessTokens`;\r\n\r\nexport const getRestaurantAccessTokens = (restaurantId) => {\r\n    return get(\r\n        getEndpoint(restaurantId),\r\n        (data, resolve, _) => resolve(data['access_tokens'])\r\n    );\r\n};\r\n\r\nexport const postRestaurantAccessToken = (restaurantId, comment) => {\r\n    return post(\r\n        getEndpoint(restaurantId),\r\n        {\r\n            comment: comment\r\n        },\r\n        (data, resolve, _) => resolve(data['access_token'])\r\n    );\r\n};\r\n\r\n\r\nexport const deleteRestaurantAccessToken = (restaurantId, id) => {\r\n    return remove(\r\n        getEndpoint(restaurantId),\r\n        id\r\n    );\r\n}\r\n\r\n\r\nexport const patchRestaurantAccessToken = (restaurantId, id, comment) => {\r\n    return patch(\r\n        getEndpoint(restaurantId),\r\n        id,\r\n        {\r\n            comment: comment\r\n        },\r\n        (data, resolve, _) => resolve(data['access_token'])\r\n    );\r\n};\r\n","import Input from \"../../../../components/inputs/input/input\";\r\nimport { Formik, Form} from \"formik\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport NoButton from \"../../../../components/buttons/noButton/noButton\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { patchRestaurantAccessToken as patchRestaurantAccessTokenService } from \"../../services/restaurantAccessTokens\";\r\n\r\nexport default function AccessUrl({privacyFilter, restaurantId, token, onDelete, onPatch}){\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    \r\n    \r\n    const handleCopyUrlToClipboard = () => {\r\n        // openInNewTab(accessUrl.url);\r\n        if (privacyFilter) {\r\n            enqueueSnackbar('disable the privacy mode on the top right corner first', {variant: 'warning'});\r\n            return;\r\n        }\r\n        navigator.clipboard.writeText(token.url);\r\n        enqueueSnackbar('the url has been copied to your clipboard, keep it private!', {variant: 'success'});\r\n    }\r\n\r\n    const handleSubmit = (comment) => {\r\n\r\n    }\r\n\r\n\r\n    return <div className='py-4'><Formik\r\n    initialValues={token}\r\n    onSubmit={(values, { setSubmitting, setErrors}) => {\r\n       patchRestaurantAccessTokenService(restaurantId, token.id, values.comment).then((newToken) => {\r\n        onPatch(token.id, newToken);\r\n        setSubmitting(false);\r\n        enqueueSnackbar(\"access token comment saved\", { variant: \"success\" });\r\n      }, () => {\r\n        setErrors({comment: \"unable to finalize request\"});\r\n        setSubmitting(false);\r\n      });\r\n    }}\r\n  >\r\n    {({ isSubmitting }) => (\r\n      <Form>\r\n        \r\n        <div className='flex pt-2'>\r\n            <div className='flex-grow'>\r\n            <Input name=\"comment\"/>\r\n            </div>\r\n\r\n            <NoButton text=\"delete\" disabled={isSubmitting} onClick={onDelete} />\r\n            <YesButton text=\"save\" type=\"submit\" disabled={isSubmitting} loading={isSubmitting} />\r\n\r\n            \r\n        </div>\r\n\r\n        <div className='flex pb-2'>\r\n            <div className={`flex-grow ${privacyFilter? 'filter blur-sm': ''}`} onClick={handleCopyUrlToClipboard}>\r\n                <Input name=\"url\" disabled />\r\n            \r\n            </div>\r\n        </div>\r\n\r\n        </Form>\r\n                \r\n    )}\r\n  </Formik></div>\r\n}","import { useState } from \"react\";\r\n\r\n/**\r\n * a wrapper around useState which allows CRUD operations on the collection\r\n * \r\n * @param key the name of the key used as id \r\n */\r\nexport const useCollectionState = (key='id', default_=[]) => {\r\n    const [items, setItems] = useState(default_);\r\n    const addItem = (item) => setItems(\r\n        [...items, item]\r\n    );\r\n    const removeItem = (id) => setItems(\r\n        items.filter(item => item[key] !== id)\r\n    );\r\n    const patchItem = (id, newItem) => setItems(\r\n        items.map(item => item[key] === id? newItem: item)\r\n    );\r\n    \r\n    return [items, setItems, {\r\n        add: addItem,\r\n        remove: removeItem, \r\n        patch: patchItem\r\n    }]\r\n  }","import Zone from \"../zone/zone\";\r\nimport AccessUrl from \"../accessUrl/accessUrl\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport { postRestaurantAccessToken, deleteRestaurantAccessToken, patchRestaurantAccessToken, getRestaurantAccessTokens } from \"../../services/restaurantAccessTokens\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { useCollectionState } from \"../../../../hooks/useCollectionState/useCollectionState\";\r\nimport React from \"react\";\r\nimport { confirmContext } from \"../../../../contexts/confirmContext\";\r\nimport { questionContext } from \"../../../../contexts/questionContext\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport const ZoneAccessTokens = ({ restaurantId, privacyFilter }) => {\r\n    const [tokens, setTokens, tokenUtils] = useCollectionState();\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const confirm = React.useContext(confirmContext);\r\n    const prompt = React.useContext(questionContext);\r\n\r\n    useEffect(() => {\r\n        getRestaurantAccessTokens(restaurantId)\r\n        .then((tokens) => setTokens(tokens))\r\n        .catch(_ => enqueueSnackbar(\"unable to retrieve access tokens\", { variant: 'error' }))\r\n    }, [restaurantId]);\r\n\r\n    const handleDeleteAccessToken = (id) => {\r\n      confirm({\r\n        title: `Do you want to delete the access token?`,\r\n        description: `Deleting the access token will render that url invalid (even for people who already had it).`,\r\n        handleSuccess: () => {\r\n            deleteRestaurantAccessToken(restaurantId, id).then(() => {\r\n                tokenUtils.remove(id);\r\n                enqueueSnackbar(\"deleted access token\", { variant: 'success' });\r\n            }).catch(() => {\r\n                enqueueSnackbar(\"unable to delete access token\", { variant: 'error' });\r\n            });\r\n        }\r\n      })\r\n    };\r\n\r\n    const handleNewAccessToken = () => {\r\n      prompt.prompt({\r\n        title: 'description',\r\n        description: 'write a small description of the uses of this url (good examples would include who will this access url be given to, or which team will have access to it)',\r\n        handleSubmit: (name) => {\r\n            return new Promise(function (resolve, reject) {\r\n                postRestaurantAccessToken(restaurantId, name).then((table) => {\r\n                    tokenUtils.add(table);\r\n                    enqueueSnackbar(\"added new default table\", { variant: 'success' });\r\n                    resolve();\r\n                }).catch(() => {\r\n                    enqueueSnackbar(\"unable to add new default table\", { variant: 'error' });\r\n                    reject();\r\n                })\r\n                })\r\n        }\r\n      })\r\n    }\r\n\r\n    const handleOnAccessTokenPatch = (id, token) => {\r\n        tokenUtils.patch(id, token);\r\n    }\r\n\r\n    return <Zone title=\"access URLs\">\r\n        <div className='grid grid-cols-1 divide-y divide-gray-500 dark:divide-gray-100'>\r\n            {tokens.map(token => <AccessUrl \r\n            key={token.id}\r\n            onPatch={handleOnAccessTokenPatch}\r\n            restaurantId={restaurantId}\r\n            privacyFilter={privacyFilter} \r\n            onDelete={() => handleDeleteAccessToken(token.id)} \r\n            token={token} />)}\r\n        </div>\r\n\r\n        <div className='grid justify-items-center  pt-8'>\r\n            <YesButton onClick={handleNewAccessToken} text=\"new\" w='w-64' />\r\n        </div>\r\n    </Zone>\r\n}","import {get, post, remove} from '../../../services/crudApi';\r\n\r\nconst getEndpoint = (restaurantId) => `/restaurants/${restaurantId}/defaultTables`;\r\n\r\nexport const getRestaurantDefaultTables = (restaurantId) => {\r\n    return get(\r\n        getEndpoint(restaurantId),\r\n        (data, resolve, _) => resolve(data['default_tables'])\r\n    );\r\n};\r\n\r\nexport const postRestaurantDefaultTables = (restaurantId, name) => {\r\n    return post(\r\n        getEndpoint(restaurantId),\r\n        {\r\n            name: name\r\n        },\r\n        (data, resolve, _) => resolve(data['default_table'])\r\n    );\r\n};\r\n\r\n\r\nexport const deleteRestaurantDefaultTables = (restaurantId, name) => {\r\n    return remove(\r\n        getEndpoint(restaurantId),\r\n        name\r\n    );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { confirmContext } from \"../../../../contexts/confirmContext\";\r\nimport { questionContext } from \"../../../../contexts/questionContext\";\r\nimport Zone from \"../zone/zone\";\r\nimport Button from \"../../../../components/buttons/button/button\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { getRestaurantDefaultTables, postRestaurantDefaultTables, deleteRestaurantDefaultTables } from \"../../services/defaultTables\";\r\nimport { useCollectionState } from \"../../../../hooks/useCollectionState/useCollectionState\";\r\nimport { useState } from \"react\";\r\nimport {useTranslation} from \"react-i18next\";\r\n\r\nexport const ZoneDefaultTables = ({ restaurantId }) => {\r\n    const [tables, setTables, tableUtils] = useCollectionState('name');\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const [loading, setLoading] = useState(null);\r\n\r\n    useEffect(() => {\r\n        getRestaurantDefaultTables(restaurantId)\r\n        .then((tables) => setTables(tables))\r\n        .catch(_ => enqueueSnackbar(\"unable to retrieve default tables\", { variant: 'error' }))\r\n    }, [restaurantId]);\r\n\r\n\r\n    const confirm = React.useContext(confirmContext);\r\n    const prompt = React.useContext(questionContext);\r\n    const { t, i18n } = useTranslation();\r\n    const handleDeleteDefaultTable = (name) => {\r\n      // TODO API\r\n      confirm({\r\n        title: `${t(\"deleteTableQuestion\")} ${name}?`,\r\n        description: `${t(\"Deleting Table\")} ${name} ${t(\"onlyDeleteFromList\")}`,\r\n        handleSuccess: () => {\r\n          setLoading(name);\r\n            deleteRestaurantDefaultTables(restaurantId, name).then(() => {\r\n                tableUtils.remove(name);\r\n                enqueueSnackbar(t(\"deleted default table\"), { variant: 'success' });\r\n            }).catch(() => {\r\n                enqueueSnackbar(t(\"unable to delete default table\"), { variant: 'error' });\r\n            }).finally(() => setLoading(null));\r\n            \r\n        }\r\n      })\r\n    };\r\n\r\n    const handleAddNewDefaultTable = () => {\r\n  \r\n      prompt.prompt({\r\n        title: t(\"table #\"),\r\n        description: t(\"what is the name of the new table you want to add?\"),\r\n        handleSubmit: (name) => {\r\n            return new Promise(function (resolve, reject) {\r\n                postRestaurantDefaultTables(restaurantId, name).then((table) => {\r\n                    tableUtils.add(table);\r\n                    enqueueSnackbar(t(\"added new default table\"), { variant: 'success' });\r\n                    resolve();\r\n                }).catch(() => {\r\n                    enqueueSnackbar(t(\"unable to add new default table\"), { variant: 'error' });\r\n                    reject();\r\n                })\r\n                })\r\n        }\r\n      })\r\n    }\r\n  \r\n    return <Zone title=\"default tables\">\r\n      {tables.map(table => <Button onClick={() => handleDeleteDefaultTable(table.name)} text={table.name} key={table.name} loading={loading===table.name} />)}\r\n  \r\n      <YesButton onClick={handleAddNewDefaultTable} text={t(\"ADD NEW\")} />\r\n    </Zone>;\r\n  }\r\n  ","import { palette } from \"../../../../palette\";\r\nimport Input from \"../../../../components/inputs/input/input\";\r\nimport { Formik, Form} from \"formik\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport Button from \"../../../../components/buttons/button/button\";\r\nimport NoButton from \"../../../../components/buttons/noButton/noButton\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { confirmContext } from \"../../../../contexts/confirmContext\";\r\nimport React from \"react\";\r\n\r\nexport default function Admin({admin, privacyFilter, deleteAdministrator, deleteAdministratorService}){\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const confirm = React.useContext(confirmContext);\r\n    \r\n    const handleDelete = () => {\r\n      confirm({\r\n        handleSuccess: () => {\r\n          deleteAdministratorService(admin.id).then(() => {\r\n            deleteAdministrator(admin.id);\r\n            enqueueSnackbar(\"administrator deleted\", { variant: \"success\" });\r\n          }).catch(() => {\r\n            enqueueSnackbar(\"unable to delete administrator\", { variant: \"error\" });\r\n          });\r\n        },\r\n        handleCancel: () => {\r\n            enqueueSnackbar(\"administrator not deleted\", { variant: \"success\" });\r\n        }});\r\n    }\r\n\r\n    return <div className='py-4'><Formik\r\n    initialValues={admin}\r\n    onSubmit={(values, { setSubmitting, setErrors}) => {\r\n      \r\n    }}\r\n  >\r\n    {({ isSubmitting }) => (\r\n      <Form>\r\n        \r\n        <div className='flex pt-2'>\r\n            <div className={`flex-grow ${privacyFilter? 'filter blur-sm': ''}`}>\r\n            <Input disabled name=\"email\"/>\r\n            </div>\r\n\r\n            <NoButton text=\"delete\" onClick={handleDelete} disabled={isSubmitting} />\r\n        </div>\r\n\r\n        </Form>\r\n                \r\n    )}\r\n  </Formik></div>\r\n}","import {get, post, remove} from '../../../services/crudApi';\r\n\r\nconst getEndpoint = (restaurantId) => `/restaurants/${restaurantId}/administrators`;\r\n\r\nexport const getRestaurantAdministrators = (restaurantId) => {\r\n    return get(\r\n        getEndpoint(restaurantId),\r\n        (data, resolve, _) => resolve(data['administrators'])\r\n    );\r\n};\r\n\r\nexport const postRestaurantAdministrator = (restaurantId, email) => {\r\n    return post(\r\n        getEndpoint(restaurantId),\r\n        {\r\n            email: email\r\n        },\r\n        (data, resolve, _) => resolve(data['administrator'])\r\n    );\r\n};\r\n\r\n\r\nexport const deleteRestaurantAdministrator = (restaurantId, id) => {\r\n    return remove(\r\n        getEndpoint(restaurantId),\r\n        id\r\n    );\r\n}\r\n","import {useSnackbar} from 'notistack';\r\nimport { useCollectionState } from '../../../../hooks/useCollectionState/useCollectionState';\r\nimport React from 'react';\r\nimport { questionContext } from '../../../../contexts/questionContext';\r\nimport { useEffect } from 'react';\r\nimport Zone from '../zone/zone';\r\nimport YesButton from '../../../../components/buttons/yesButton/yesButton';\r\nimport Admin from '../admin/admin';\r\nimport { getRestaurantAdministrators, postRestaurantAdministrator, deleteRestaurantAdministrator } from '../../services/restaurantAdministrators';\r\n\r\nexport const ZoneRestaurantAdministrators = ({ restaurantId, privacyFilter }) => {\r\n  const [administrators, setAdministrators, administratorUtils] = useCollectionState();\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n  const question = React.useContext(questionContext);\r\n\r\n  useEffect(() => {\r\n    getRestaurantAdministrators(restaurantId)\r\n      .then((administators) => setAdministrators(administators))\r\n      .catch(_ => enqueueSnackbar(\"unable to retrieve restaurant administrators\", { variant: 'error' }))\r\n  }, [restaurantId]);\r\n\r\n  const handleNewAdministrator = () => {\r\n    question.prompt({\r\n      title: \"administrator email\", description: \"this will add a new administrator to the system; restaurant administrators can manage the access urls of their restaurants and the default tables\",\r\n      handleSubmit: (email) => {\r\n        return new Promise(function (resolve, reject) {\r\n          postRestaurantAdministrator(restaurantId, email).then((administrator) => {\r\n            administratorUtils.add(administrator);\r\n            enqueueSnackbar(\"added new restaurant administrator\", { variant: 'success' });\r\n            resolve();\r\n          }).catch(() => {\r\n            enqueueSnackbar(\"unable to add new restaurant administrator\", { variant: 'error' });\r\n            reject();\r\n          })\r\n        })\r\n      }, handleCancel: () => enqueueSnackbar(\"cancelled\", { variant: 'warning' })\r\n    })\r\n  };\r\n\r\n  return <Zone title=\"restaurant administrators\">\r\n    <div className='grid grid-cols-1 divide-y divide-gray-500'>\r\n      {administrators.map(administrator => (\r\n        <Admin key={administrator.id} admin={administrator} privacyFilter={privacyFilter} deleteAdministrator={administratorUtils.remove}\r\n          deleteAdministratorService={(id) => deleteRestaurantAdministrator(restaurantId, id)} />\r\n      ))}\r\n    </div>\r\n    <div className='grid justify-items-center  pt-8'>\r\n      <YesButton onClick={handleNewAdministrator} text={\"ADD NEW\"} w='w-64' />\r\n    </div>\r\n\r\n  </Zone>\r\n}\r\n","import {get, post, remove, patch} from '../../../services/crudApi';\r\n\r\nconst ENDPOINT = '/restaurants';\r\n\r\nexport const getRestaurants = () => {\r\n    return get(\r\n        ENDPOINT,\r\n        (data, resolve, _) => resolve(data['restaurants'])\r\n    );\r\n};\r\n\r\nexport const getRestaurant = (id) => {\r\n    return get(\r\n        `${ENDPOINT}/${id}`,\r\n        (data, resolve, _) => resolve(data['restaurant'])\r\n    );\r\n};\r\n\r\n\r\nexport const postRestaurant = (name) => {\r\n    return post(\r\n        ENDPOINT,\r\n        {\r\n            name: name\r\n        },\r\n        (data, resolve, _) => resolve(data['restaurant'])\r\n    );\r\n};\r\n\r\n\r\nexport const deleteRestaurant = (id) => {\r\n    return remove(\r\n        ENDPOINT,\r\n        id\r\n    );\r\n}\r\n\r\nexport const patchRestaurant = (id, data) => {\r\n    return patch(\r\n        ENDPOINT,\r\n        id,\r\n        data,\r\n        (data, resolve, _) => resolve(data['restaurant'])\r\n    );\r\n}\r\n\r\n","import Input from \"../../../../components/inputs/input/input\";\r\nimport { Formik, Form} from \"formik\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { patchRestaurant } from \"../../services/restaurants\";\r\n\r\nexport default function TimeProfile({restaurantId, prefix, onPatch, profileName, profileValue}){\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    return <div className='py-4'><Formik\r\n    initialValues={{'profile': profileValue}}\r\n    enableReinitialize={true}\r\n    onSubmit={(values, { setSubmitting, setErrors}) => {\r\n      const newValue = values.profile;\r\n      patchRestaurant(restaurantId, {[profileName]: newValue}).then((newValue) => {\r\n        onPatch(newValue[profileName]);\r\n        setSubmitting(false);\r\n        enqueueSnackbar(\"time profile saved\", { variant: \"success\" });\r\n      }, () => {\r\n        setErrors({comment: \"unable to finalize request\"});\r\n        setSubmitting(false);\r\n      });\r\n    }}\r\n  >\r\n    {({ isSubmitting }) => (\r\n      <Form>\r\n        \r\n        <div className='flex pt-2'>\r\n            <div className='flex-grow'>\r\n            <Input name=\"profile\"/>\r\n            </div>\r\n            <YesButton text={`save ${prefix}`} w={'w-32'} type=\"submit\" disabled={isSubmitting} loading={isSubmitting} />\r\n        </div>\r\n        </Form>\r\n                \r\n    )}\r\n  </Formik></div>\r\n}","import Zone from \"../zone/zone\";\r\nimport { postRestaurantAccessToken, deleteRestaurantAccessToken, patchRestaurantAccessToken, getRestaurantAccessTokens } from \"../../services/restaurantAccessTokens\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport React from \"react\";\r\nimport { confirmContext } from \"../../../../contexts/confirmContext\";\r\nimport TimeProfile from \"../timeProfile/timeProfile\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getRestaurant } from \"../../services/restaurants\";\r\n\r\nexport const ZoneTimeProfile = ({ restaurantId }) => {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [profiles, setProfiles] = useState({\r\n        'alarm_minutes': 20,\r\n        'warning_minutes': 15\r\n    });\r\n\r\n    useEffect(() => {\r\n        getRestaurant(restaurantId)\r\n        .then(restaurant => setProfiles({\r\n            'alarm_minutes': restaurant.alarm_minutes,\r\n            'warning_minutes': restaurant.warning_minutes\r\n        }))\r\n        .catch(() => enqueueSnackbar('unable to retrieve restaurant', {variant: 'error'}));\r\n    }, [restaurantId]);\r\n\r\n\r\n    return <Zone title=\"time profile\">\r\n        <div className='grid grid-cols-1 divide-y divide-gray-500 dark:divide-gray-100'>\r\n        <TimeProfile \r\n            onPatch={(minutes) => setProfiles({...profiles, 'alarm_minutes': minutes})}\r\n            restaurantId={restaurantId}\r\n            profileValue={profiles.alarm_minutes} \r\n            profileName={'alarm_minutes'}\r\n            prefix={'alarm'}\r\n        />\r\n\r\n        <TimeProfile \r\n            onPatch={(minutes) => setProfiles({...profiles, 'warning_minutes': minutes})}\r\n            restaurantId={restaurantId}\r\n            profileValue={profiles.warning_minutes} \r\n            profileName={'warning_minutes'}\r\n            prefix={'warning'}\r\n            />\r\n        </div>\r\n    </Zone>\r\n}","import React from 'react';\r\nimport { userContext } from '../../contexts/userContext';\r\nimport { ZoneAccessTokens } from './components/zoneAccessTokens/zoneAccessTokens';\r\nimport { ZoneDefaultTables } from './components/zoneDefaultTables/zoneDefaultTables';\r\nimport { ZoneRestaurantAdministrators } from './components/zoneRestaurantAdministrators/zoneRestaurantAdministrators';\r\nimport { ZoneTimeProfile } from './components/zoneTimeProfile/zoneTimeProfile';\r\n\r\nfunction AdminDashboardPageRestaurant({ privacyFilter, restaurant }) {\r\n  const userCtx = React.useContext(userContext);\r\n\r\n  return <React.Fragment>\r\n    <ZoneDefaultTables restaurantId={restaurant.id} />\r\n    <ZoneAccessTokens privacyFilter={privacyFilter}  restaurantId={restaurant.id} />\r\n    <ZoneTimeProfile restaurantId={restaurant.id} />\r\n    {userCtx.isSuperAdminLoggedIn && <ZoneRestaurantAdministrators privacyFilter={privacyFilter} restaurantId={restaurant.id} />}\r\n  </React.Fragment>\r\n}\r\n\r\nexport default AdminDashboardPageRestaurant;\r\n\r\n","import {get, post, remove} from '../../../services/crudApi';\r\n\r\nconst ENDPOINT = '/administrators/super';\r\n\r\nexport const getSuperAdministrators = () => {\r\n    return get(\r\n        ENDPOINT,\r\n        (data, resolve, _) => resolve(data['administrators'])\r\n    );\r\n};\r\n\r\nexport const postSuperAdministrator = (email) => {\r\n    return post(\r\n        ENDPOINT,\r\n        {\r\n            email: email\r\n        },\r\n        (data, resolve, _) => resolve(data['administrator'])\r\n    );\r\n};\r\n\r\n\r\nexport const deleteSuperAdministrator = (id) => {\r\n    return remove(\r\n        ENDPOINT,\r\n        id\r\n    );\r\n}\r\n","import {useSnackbar} from 'notistack';\r\nimport { useCollectionState } from '../../../../hooks/useCollectionState/useCollectionState';\r\nimport React from 'react';\r\nimport { questionContext } from '../../../../contexts/questionContext';\r\nimport { useEffect } from 'react';\r\nimport Zone from '../zone/zone';\r\nimport YesButton from '../../../../components/buttons/yesButton/yesButton';\r\nimport Admin from '../admin/admin';\r\nimport { getSuperAdministrators, postSuperAdministrator, deleteSuperAdministrator } from '../../services/superAdministrators';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport const ZoneRootAdministrators = ({ privacyFilter }) => {\r\n  const [administrators, setAdministrators, administratorUtils] = useCollectionState();\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n  const question = React.useContext(questionContext);\r\n  const { t, i18n } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    getSuperAdministrators()\r\n      .then((administators) => setAdministrators(administators))\r\n      .catch(_ => enqueueSnackbar(t(\"errorAdminRetrieval\"), { variant: 'error' }))\r\n  }, []);\r\n\r\n  const handleNewAdministrator = () => {\r\n    question.prompt({\r\n      title: t(\"administratorEmail\"), description: t(\"descriptionAddAdmin\"),\r\n      handleSubmit: (email) => {\r\n        return new Promise(function (resolve, reject) {\r\n          postSuperAdministrator(email).then((administrator) => {\r\n            administratorUtils.add(administrator);\r\n            enqueueSnackbar(t(\"addAdmin\"), { variant: 'success' });\r\n            resolve();\r\n          }).catch(() => {\r\n            enqueueSnackbar(t(\"errorAddAdmin\"), { variant: 'error' });\r\n            reject();\r\n          })\r\n        })\r\n      }, handleCancel: () => enqueueSnackbar(t(\"cancelled\"), { variant: 'warning' })\r\n    })\r\n  };\r\n\r\n  return <Zone title={t(\"root administrators\")}>\r\n    <div className='grid grid-cols-1 divide-y divide-gray-500'>\r\n      {administrators.map(administrator => (\r\n        <Admin key={administrator.id} admin={administrator} privacyFilter={privacyFilter} \r\n        deleteAdministrator={administratorUtils.remove}\r\n        deleteAdministratorService={deleteSuperAdministrator}\r\n        />\r\n      ))}\r\n    </div>\r\n    <div className='grid justify-items-center  pt-8'>\r\n      <YesButton onClick={handleNewAdministrator} text={t(\"ADD NEW\")} w='w-64'/>\r\n    </div>\r\n\r\n  </Zone>\r\n}\r\n","import { palette } from \"../../../../palette\";\r\nimport Input from \"../../../../components/inputs/input/input\";\r\nimport { Formik, Form} from \"formik\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport Button from \"../../../../components/buttons/button/button\";\r\nimport NoButton from \"../../../../components/buttons/noButton/noButton\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { confirmContext } from \"../../../../contexts/confirmContext\";\r\nimport React from \"react\";\r\nimport { patchRestaurant as patchRestaurantService, deleteRestaurant as deleteRestaurantService, patchRestaurant } from \"../../services/restaurants\";\r\n\r\nexport default function Restaurant({restaurant, setRestaurant, patchRestaurant, deleteRestaurant}){\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const confirm = React.useContext(confirmContext);\r\n\r\n    const handleDelete = () => {\r\n      confirm({\r\n        handleSuccess: () => {\r\n          deleteRestaurantService(restaurant.id).then(() => {\r\n              deleteRestaurant(restaurant.id);\r\n              enqueueSnackbar(\"restaurant deleted\", { variant: \"success\" });\r\n            }).catch(() => {\r\n              enqueueSnackbar(\"unable to delete restaurant\", { variant: \"error\" });\r\n            })\r\n            \r\n        },\r\n        handleCancel: () => {\r\n            enqueueSnackbar(\"restaurant not deleted\", { variant: \"success\" });\r\n        }});\r\n    }\r\n\r\n    const handleGoToAdmin = () => setRestaurant(restaurant);\r\n\r\n\r\n    return <div className='py-4'><Formik\r\n    initialValues={restaurant}\r\n    onSubmit={(values, { setSubmitting, setErrors}) => {\r\n       patchRestaurantService(restaurant.id, {'name': values.name}).then((newRestaurant) => {\r\n         patchRestaurant(restaurant.id, newRestaurant);\r\n         setSubmitting(false);\r\n         enqueueSnackbar(\"restaurant name saved\", { variant: \"success\" });\r\n       }, () => {\r\n         setErrors({comment: \"unable to finalize request\"});\r\n         setSubmitting(false);\r\n       });\r\n    }}\r\n  >\r\n    {({ isSubmitting }) => (\r\n      <Form>\r\n        \r\n        <div className='flex pt-2'>\r\n            <div className='flex-grow'>\r\n            <Input name=\"name\"/>\r\n            </div>\r\n\r\n            <NoButton text=\"delete\" onClick={handleDelete} disabled={isSubmitting} />\r\n            <YesButton text=\"save\" type=\"submit\" disabled={isSubmitting} loading={isSubmitting} />\r\n            <Button text=\"admin\" onClick={handleGoToAdmin} disabled={isSubmitting} />\r\n        </div>\r\n\r\n        </Form>\r\n                \r\n    )}\r\n  </Formik></div>\r\n}","import React from \"react\";\r\nimport Zone from \"../zone/zone\";\r\nimport Restaurant from \"../restaurant/restaurant\";\r\nimport YesButton from \"../../../../components/buttons/yesButton/yesButton\";\r\nimport { useEffect } from \"react\";\r\nimport { useCollectionState } from \"../../../../hooks/useCollectionState/useCollectionState\";\r\nimport { useSnackbar} from 'notistack';\r\nimport { questionContext } from \"../../../../contexts/questionContext\";\r\nimport { getRestaurants, postRestaurant } from \"../../services/restaurants\";\r\n\r\nexport const ZoneRestaurants = ({ setRestaurant }) => {\r\n    const [restaurants, setRestaurants, restaurantsUtils] = useCollectionState();\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const question = React.useContext(questionContext);\r\n  \r\n    useEffect(() => {\r\n      getRestaurants()\r\n        .then((restaurants) => setRestaurants(restaurants))\r\n        .catch(_ => enqueueSnackbar(\"unable to retrieve restaurants\", { variant: 'error' }))\r\n    }, []);\r\n  \r\n    const handleNewRestaurant = () => {\r\n      question.prompt({\r\n        title: \"restaurant name\", description: \"this will add a new restaurant to the system\",\r\n        handleSubmit: (name) => {\r\n          return new Promise(function (resolve, reject) {\r\n            postRestaurant(name).then((restaurant) => {\r\n              restaurantsUtils.add(restaurant);\r\n              enqueueSnackbar(\"added new restaurant\", { variant: 'success' });\r\n              resolve();\r\n            }).catch(() => {\r\n              enqueueSnackbar(\"unable to add new restaurant\", { variant: 'error' });\r\n              reject();\r\n            })\r\n          })\r\n        }, handleCancel: () => enqueueSnackbar(\"cancelled\", { variant: 'warning' })\r\n      })\r\n    };\r\n  \r\n    return <Zone title=\"restaurants\">\r\n      <div className='grid grid-cols-1 divide-y divide-gray-500'>\r\n        {restaurants.map(restaurant => (\r\n          <Restaurant key={restaurant.id} patchRestaurant={restaurantsUtils.patch} deleteRestaurant={restaurantsUtils.remove} restaurant={restaurant} setRestaurant={setRestaurant} />\r\n        ))}\r\n      </div>\r\n      <div className='grid justify-items-center pt-8'>\r\n        <YesButton onClick={handleNewRestaurant} text={\"ADD NEW\"} w='w-64' />\r\n      </div>\r\n  \r\n    </Zone>\r\n  }\r\n  ","import React, { useEffect } from 'react';\r\nimport { ZoneRootAdministrators } from './components/zoneRootAdministrators/zoneRootAdministrators';\r\nimport { ZoneRestaurants } from './components/zoneRestaurants/zoneRestaurants';\r\n\r\nfunction AdminDashboardPageSuper({ privacyFilter, setRestaurant }) {\r\n  return <React.Fragment>\r\n    <ZoneRestaurants setRestaurant={setRestaurant} />\r\n    <ZoneRootAdministrators privacyFilter={privacyFilter} />\r\n  </React.Fragment>\r\n}\r\n\r\nexport default AdminDashboardPageSuper;\r\n\r\n","import React from 'react';\r\n\r\n\r\nexport default function BackToRootButton({setRestaurant}) {\r\n  const handleClick = () => setRestaurant(null);\r\n    \r\n    return <div className='p-2 inline-block'><div onClick={handleClick} className=\"flex-shrink-0 flex items-center justify-center h-8 w-8 rounded-full cursor-pointer bg-gray-100 hover:bg-gray-200 sm:h-8 sm:w-8\">\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-900\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n         <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z\" />\r\n</svg>\r\n    </div></div>;\r\n}","import ThemeButton from '../../components/themeButton/themeButton';\r\nimport LanguageButton from '../../components/languageButton/languageButton';\r\nimport { palette } from '../../palette';\r\nimport { useEffect, useState } from 'react';\r\nimport React from 'react';\r\nimport PrivacyButton from './components/privacyButton/privacyButton';\r\nimport SignOutButton from './components/signOutButton/signOutButton';\r\nimport { userContext } from '../../contexts/userContext';\r\nimport AdminDashboardPageRestaurant from './adminDashboardPageRestaurant';\r\nimport AdminDashboardPageSuper from './adminDashboardPageSuper';\r\nimport BackToRootButton from './components/backToRootButton/backToRootButton';\r\n\r\n\r\nfunction AdminDashboardPage() {\r\n  const userCtx = React.useContext(userContext);\r\n\r\n  const [privacyFilter, setPrivacyFilter] = useState(true);\r\n  const [restaurant, setRestaurant] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (userCtx.params.restaurantId === null) {\r\n      setRestaurant(null);\r\n      return;\r\n    }\r\n    setRestaurant({\r\n      id: userCtx.params.restaurantId,\r\n      name: userCtx.params.restaurantName\r\n    })\r\n  }, [userCtx.params])\r\n\r\n  return <div>\r\n    <div className='p-2 pl-8 pr-8'>\r\n      <div className='inline-block'>\r\n        <p className={`font-mono text-4xl ${palette.text}`}>\r\n          {userCtx.isSuperAdminLoggedIn && restaurant === null ? 'root admin' : restaurant.name ?? '...'}\r\n        </p>\r\n      </div>\r\n      <div className='float-right'>\r\n        {(userCtx.isSuperAdminLoggedIn && restaurant !== null) && <BackToRootButton setRestaurant={setRestaurant} />}\r\n        <ThemeButton />\r\n        <LanguageButton />\r\n        <PrivacyButton privacyFilter={privacyFilter} setPrivacyFilter={setPrivacyFilter} />\r\n        <SignOutButton />\r\n      </div>\r\n    </div>\r\n\r\n    <div className='inline-block w-full'>\r\n      { (userCtx.isRestaurantAdminLoggedIn || restaurant !== null) \r\n          ? <AdminDashboardPageRestaurant privacyFilter={privacyFilter} restaurant={restaurant} />\r\n          : <AdminDashboardPageSuper privacyFilter={privacyFilter} setRestaurant={setRestaurant} />}\r\n    </div>\r\n  </div>\r\n}\r\n\r\nexport default AdminDashboardPage;\r\n\r\n","import {GoogleLogin} from 'react-google-login';\r\nimport React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSnackbar } from 'notistack';\r\nimport { userContext } from '../../contexts/userContext';\r\nimport { attemptLogin } from './services/loginWithGoogle';\r\n\r\nconst clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\n\r\nfunction LoginPage() {\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const userCtx = React.useContext(userContext);\r\n  \r\n  let history = useHistory();\r\n  const location = useLocation();\r\n\r\n  \r\n  const onSuccess = (res) => {\r\n    attemptLogin(res.tokenObj.id_token)\r\n    .then(([loggedIn, data]) => {\r\n      if (!loggedIn){\r\n        enqueueSnackbar(\"user does not exist\", {variant: 'warning'});\r\n        return;\r\n      }\r\n      userCtx.setType(data.type);\r\n      userCtx.setParams(data);\r\n      const {from} = location.state || {from: {pathname: \"/admin\"}};\r\n      history.push(from);\r\n      enqueueSnackbar(\"logged in\", {variant: 'success'});\r\n    })\r\n    .catch(() => {\r\n      enqueueSnackbar(\"unable to log in with the server\", {variant: 'error'});\r\n    })\r\n  }\r\n  \r\n  const onFailure = (res) => {\r\n    enqueueSnackbar(\"unable to log in with Google\", {variant: 'error'});\r\n  }\r\n\r\n  return <div className=\"flex items-center justify-center h-screen\">\r\n    <GoogleLogin\r\n      clientId={clientId}\r\n      buttonText=\"Login\"\r\n      onSuccess={onSuccess}\r\n      onFailure={onFailure}\r\n      cookiePolicy={'single_host_origin'} />\r\n  </div>;\r\n}\r\n\r\nexport default LoginPage;","import { authHeader } from \"../../../helpers/csrfCookieHeader\";\r\nimport axios from \"axios\";\r\n\r\nexport const attemptLogin = (token) => {\r\n    return new Promise(function(resolve, reject) {\r\n        axios({url: `${process.env.REACT_APP_BACKEND_URL}/auth/v1/login/google`,\r\n            method: 'POST',\r\n            auth: {\r\n                username: '',\r\n                password: token\r\n            },\r\n            headers: {'Cache-Control': 'no-cache', ...authHeader()}\r\n        })\r\n        .then(res => resolve([true, res.data]))\r\n        .catch(function (res) {\r\n            try { if (res[\"response\"][\"status\"] === 401) resolve(false) } catch(err){}\r\n            reject(res);\r\n        });\r\n    });\r\n}\r\n\r\n","import './App.css';\r\nimport React, { useState } from 'react';\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\r\nimport NotFoundPage from \"./pages/notFoundPage/notFoundPage\";\r\nimport PrivateRoute from \"./helpers/privateRoute\";\r\nimport RestaurantDashboardPage from \"./pages/restaurantDashboardPage/restaurantDashboardPage\";\r\nimport { userContext } from './contexts/userContext';\r\nimport AdminDashboardPage from \"./pages/adminDashboardPage/adminDashboardPage\";\r\nimport LoginPage from \"./pages/loginPage/loginPage\";\r\nimport { BaseConfirmContextProvider } from './contexts/confirmContext';\r\nimport { ThemeContextProvider } from './contexts/themeContext';\r\nimport { palette } from './palette';\r\nimport { LanguageContextProvider } from './contexts/languageContext';\r\nimport { QuestionContextProvider } from './contexts/questionContext';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { TYPE_SUPER_ADMIN, TYPE_RESTAURANT_ADMIN } from './contexts/userContext';\r\nimport { UserContextProvider } from './contexts/userContext';\r\nfunction App() {\r\n    const routerRef = React.createRef();\r\n\r\n    return (\r\n        <ThemeContextProvider>\r\n            <div className={`App ${palette.bg} min-h-screen min-w-screen`}>\r\n                <LanguageContextProvider>\r\n                    <SnackbarProvider>\r\n                        <UserContextProvider>\r\n                            <BaseConfirmContextProvider>\r\n                                <QuestionContextProvider>\r\n                                    <BrowserRouter ref={routerRef} basename=\"/app\">\r\n                                        <Switch>\r\n                                            <PrivateRoute path={'/admin'} baseRouter={routerRef}\r\n                                                component={AdminDashboardPage}\r\n                                                type={[TYPE_RESTAURANT_ADMIN, TYPE_SUPER_ADMIN]}\r\n                                            />\r\n                                            <Route path={'/restaurant'}\r\n                                                component={RestaurantDashboardPage} />\r\n                                            <Route path={'/login'}\r\n                                                component={LoginPage} />\r\n                                            <Route\r\n                                                component={NotFoundPage} />\r\n                                        </Switch>\r\n                                    </BrowserRouter>\r\n                                </QuestionContextProvider>\r\n                            </BaseConfirmContextProvider>\r\n                        </UserContextProvider>\r\n                    </SnackbarProvider>\r\n                </LanguageContextProvider>\r\n\r\n            </div>\r\n        </ThemeContextProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport './i18n';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}